<!DOCTYPE html>
<html lang="en">
<head>
<title>Home - Octopus Deploy</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="Octopus Deploy end user documentation">
<meta name="author" content="Octopus Deploy Pty. Ltd.">
<link href="https://octopus.com/Content/css?v=gINWHNhE0iHcMgkubiWTdi_Y0omBd0nNmJWowMG1gJM1" rel="stylesheet">
<link rel="stylesheet" href="https://octopus.com/Content/Print.css" type="text/css" media="print">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.css" integrity="sha256-Bl4rr1AwUjcb8VvRrdHXqJvRRCyF7oHsgUl74ELjr7k=" crossorigin="anonymous">
<meta name="viewport" content="width=device-width">
<meta property="og:type" content="website">
<meta property="og:title" content="Home - Octopus Deploy">
<meta property="og:description" content="Octopus Deploy end user documentation">
<meta property="og:site_name" content="Octopus Deploy">
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@OctopusDeploy">
<meta name="application-name" content="Octopus Deploy">
<link rel="canonical" href="https://octopus.com/docs">
<link rel="me" type="text/html" href="https://plus.google.com/102650558422902813929?rel=me">
<link rel="me" type="text/html" href="http://feeds.feedburner.com/OctopusDeploy">
<link rel="me" type="text/html" href="https://twitter.com/OctopusDeploy">
<link rel="icon" type="image/png" href="https://octopus.com/content/resources/favicon.png">
<link rel="apple-touch-icon" href="https://octopus.com/content/resources/Octopus-96x96.png">
<link href="http://feeds.feedburner.com/OctopusDeploy" type="application/rss+xml" rel="alternate" title="Octopus Deploy Blog Feed">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous">
<style>.btnCopy{position:absolute;right:0;top:0;}.copyToClipboard{position:relative;}@media (min-width: 1200px) {.container{max-width:1600px;width:100%;}}</style>
</head>
<body class="">
 
<script>
    window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
    ga('create', 'UA-24461753-1', 'auto');
    ga('send', 'pageview');
</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
 
 
<script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
        var b=document.getElementsByTagName("script")[0];
        a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/2568.js?"+Math.floor(new Date().getTime()/3600000);
        a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>
 
<div class="top-and-splash">
<div id="top">
<div id="header">
<div class="navbar navbar-fixed-top">
<div class="">
<div class="container">
<div>
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a id="logo" class="navbar-brand" href="/">Octopus Deploy</a>
</div>
<div id="nav-main" class='navbar-collapse collapse'>
<div>
<ul class="nav navbar-nav navbar-right">
<li class="">
<a href="/why">
Why Octopus
</a>
</li>
<li class="">
<a href="/downloads">
Downloads
</a>
</li>
<li class="">
<a href="/company/about">
Company
</a>
</li>
<li class="active">
<a href="/docs">
Docs
</a>
</li>
<li class="">
<a href="/support">
Support
</a>
</li>
<li class="">
<a href="/purchase">
Pricing
</a>
</li>
<li class=""><a href="/blog">Blog</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="middle">
<div id="main">
<div class="stripe stripe-blue">
<div class="container">
<span class="page-title">Octopus Deploy Documentation</span>
</div>
</div>
<div style="padding-left: 16px;" class="stripe stripe-white">
<div class="container">
<div class="row">
<div class="col-md-9">
<div id="doc_content" class="main-content"><h1>Installing the Tentacle via DSC in an ARM Template</h1><p>While the <a href="/docs/v/3.7/installation/installing-tentacles/azure-virtual-machines">Azure VM Extension</a> is the recommended approach to installing the Tentacle, it does not expose all possible configuration options and permutations. If you need more power and configurability, you can use <a href="https://msdn.microsoft.com/en-us/powershell/dsc/overview" rel="nofollow">Desired State Configuration</a> (DSC).</p>
<p>The following example shows how to install a Tentacle during VM provisioning.</p>
<ol>
<li>Download the latest release of the OctopusDSC from the <a href="https://github.com/OctopusDeploy/OctopusDSC/releases" rel="nofollow">OctopusDSC repo</a> and extract it into a new folder</li>
<li>Create a configuration file (eg <code>OctopusTentacle.ps1</code>) next to the <code>OctopusDSC</code> folder:</li>
</ol>
<pre><code class="language-powershell">configuration OctopusTentacle
{
    param ($ApiKey, $OctopusServerUrl, $Environments, $Roles, $ServerPort)

    Import-DscResource -Module OctopusDSC

    Node &quot;localhost&quot;
    {
        cTentacleAgent OctopusTentacle
        {
            Ensure = &quot;Present&quot;
            State = &quot;Started&quot;

            # Tentacle instance name. Leave it as 'Tentacle' unless you have more
            # than one instance
            Name = &quot;Tentacle&quot;

            # Registration - all parameters required
            ApiKey = $ApiKey
            OctopusServerUrl = $OctopusServerUrl
            Environments = $Environments
            Roles = $Roles

            # How Tentacle will communicate with the server
            CommunicationMode = &quot;Poll&quot;
            ServerPort = $ServerPort

            # Where deployed applications will be installed by Octopus
            DefaultApplicationDirectory = &quot;C:\Applications&quot;

            # Where Octopus should store its working files, logs, packages etc
            TentacleHomeDirectory = &quot;C:\Octopus&quot;
        }
    }
}
</code></pre>
<ol start="3">
<li>Create a new zip file containing both the <code>OctopusDSC</code> folder and the <code>OctopusTentacle.ps1</code> file.</li>
<li>Upload the zip file to a location accessible during VM provisioning. You can either use a public location, or a private location protected with a <a href="https://docs.microsoft.com/en-us/azure/storage/storage-dotnet-shared-access-signature-part-1" rel="nofollow">SAS token</a>.</li>
<li>Create an ARM template (eg <code>arm-template.json</code>) that creates your virtual machine as normal. eg:</li>
</ol>
<pre><code class="language-json">{
  &quot;$schema&quot;: &quot;http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json&quot;,
  &quot;contentVersion&quot;: &quot;1.0.0.0&quot;,
  &quot;parameters&quot;: {
    &quot;vmAdminUsername&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;Admin username for the Virtual Machine.&quot;
      }
    },
    &quot;vmAdminPassword&quot;: {
      &quot;type&quot;: &quot;securestring&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;Admin password for the Virtual Machine.&quot;
      }
    },
    &quot;vmDnsName&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;Unique DNS Name for the Public IP used to access the Virtual Machine.&quot;
      }
    },
    &quot;vmSize&quot;: {
      &quot;defaultValue&quot;: &quot;Standard_D2_v2&quot;,
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;Size of the Virtual Machine&quot;
      }
    },
    &quot;tentacleOctopusServerUrl&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;The URL of the octopus server with which to register&quot;
      }
    },
    &quot;tentacleApiKey&quot;: {
      &quot;type&quot;: &quot;securestring&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;The Api Key to use to register the Tentacle with the server&quot;
      }
    },
    &quot;tentacleCommunicationMode&quot;: {
      &quot;defaultValue&quot;: &quot;Listen&quot;,
      &quot;allowedValues&quot;: [
        &quot;Listen&quot;,
        &quot;Poll&quot;
      ],
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;The type of Tentacle - whether the Tentacle listens for requests from server, or actively polls the server for requests&quot;
      }
    },
    &quot;tentaclePort&quot;: {
      &quot;defaultValue&quot;: 10933,
      &quot;minValue&quot;: 0,
      &quot;maxValue&quot;: 65535,
      &quot;type&quot;: &quot;int&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;The port on which the Tentacle should listen, when CommunicationMode is set to Listen, or the port on which to poll the server, when CommunicationMode is set to Poll. By default, Tentacle's listen on 10933 and poll the Octopus Server on 10943.&quot;
      }
    },
    &quot;tentacleRoles&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;A comma delimited list of roles to apply to the Tentacle&quot;
      }
    },
    &quot;tentacleEnvironments&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;A comma delimited list of environments in which the Tentacle should be placed&quot;
      }
    },
    &quot;tentaclePublicHostNameConfiguration&quot;: {
      &quot;defaultValue&quot;: &quot;PublicIP&quot;,
      &quot;allowedValues&quot;: [
        &quot;PublicIP&quot;,
        &quot;FQDN&quot;,
        &quot;ComputerName&quot;,
        &quot;Custom&quot;
      ],
      &quot;type&quot;: &quot;string&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;How the Octopus Server should contact the Tentacle. Only required when CommunicationMode is 'Listen'.&quot;
      }
    },
    &quot;tentacleCustomPublicHostName&quot;: {
      &quot;type&quot;: &quot;string&quot;,
      &quot;defaultValue&quot;: &quot;&quot;,
      &quot;metadata&quot;: {
        &quot;description&quot;: &quot;The custom public host name that the Octopus Server should use to contact the Tentacle. Only required when communicationMode is 'Listen' and publicHostNameConfiguration is 'Custom'.&quot;
      }
    }
  },
  &quot;variables&quot;: {
    &quot;namespace&quot;: &quot;octopus&quot;,
    &quot;location&quot;: &quot;[resourceGroup().location]&quot;,
    &quot;tags&quot;: {
      &quot;vendor&quot;: &quot;Octopus Deploy&quot;,
      &quot;description&quot;: &quot;Example deployment of Octopus Tentacle to a Windows Server.&quot;
    },
    &quot;diagnostics&quot;: {
      &quot;storageAccount&quot;: {
        &quot;name&quot;: &quot;[concat('diagnostics', uniquestring(resourceGroup().id))]&quot;
      }
    },
    &quot;networkSecurityGroupName&quot;: &quot;[concat(variables('namespace'), '-nsg')]&quot;,
    &quot;publicIPAddressName&quot;: &quot;[concat(variables('namespace'), '-publicip')]&quot;,
    &quot;vnet&quot;: {
      &quot;name&quot;: &quot;[concat(variables('namespace'), '-vnet')]&quot;,
      &quot;addressPrefix&quot;: &quot;10.0.0.0/16&quot;,
      &quot;subnet&quot;: {
        &quot;name&quot;: &quot;[concat(variables('namespace'), '-subnet')]&quot;,
        &quot;addressPrefix&quot;: &quot;10.0.0.0/24&quot;
      }
    },
    &quot;nic&quot;: {
      &quot;name&quot;: &quot;[concat(variables('namespace'), '-nic')]&quot;,
      &quot;ipConfigName&quot;: &quot;[concat(variables('namespace'), '-ipconfig')]&quot;
    },
    &quot;vmName&quot;: &quot;[concat(variables('namespace'),'-vm')]&quot;
  },
  &quot;resources&quot;: [
    {
      &quot;type&quot;: &quot;Microsoft.Storage/storageAccounts&quot;,
      &quot;apiVersion&quot;: &quot;2016-01-01&quot;,
      &quot;name&quot;: &quot;[variables('diagnostics').storageAccount.name]&quot;,
      &quot;location&quot;: &quot;[variables('location')]&quot;,
      &quot;tags&quot;: {
        &quot;vendor&quot;: &quot;[variables('tags').vendor]&quot;,
        &quot;description&quot;: &quot;[variables('tags').description]&quot;
      },
      &quot;kind&quot;: &quot;Storage&quot;,
      &quot;sku&quot;: {
        &quot;name&quot;: &quot;Standard_LRS&quot;
      },
      &quot;properties&quot;: {}
    },
    {
      &quot;type&quot;: &quot;Microsoft.Network/networkSecurityGroups&quot;,
      &quot;apiVersion&quot;: &quot;2016-03-30&quot;,
      &quot;name&quot;: &quot;[variables('networkSecurityGroupName')]&quot;,
      &quot;location&quot;: &quot;[variables('location')]&quot;,
      &quot;tags&quot;: {
        &quot;vendor&quot;: &quot;[variables('tags').vendor]&quot;,
        &quot;description&quot;: &quot;[variables('tags').description]&quot;
      },
      &quot;properties&quot;: {
        &quot;securityRules&quot;: [
          {
            &quot;name&quot;: &quot;allow_rdp&quot;,
            &quot;properties&quot;: {
              &quot;description&quot;: &quot;Allow inbound RDP&quot;,
              &quot;protocol&quot;: &quot;Tcp&quot;,
              &quot;sourcePortRange&quot;: &quot;*&quot;,
              &quot;destinationPortRange&quot;: &quot;3389&quot;,
              &quot;sourceAddressPrefix&quot;: &quot;*&quot;,
              &quot;destinationAddressPrefix&quot;: &quot;*&quot;,
              &quot;access&quot;: &quot;Allow&quot;,
              &quot;priority&quot;: 123,
              &quot;direction&quot;: &quot;Inbound&quot;
            }
          }
        ]
      }
    },
    {
      &quot;type&quot;: &quot;Microsoft.Network/publicIPAddresses&quot;,
      &quot;name&quot;: &quot;[variables('publicIPAddressName')]&quot;,
      &quot;apiVersion&quot;: &quot;2016-03-30&quot;,
      &quot;location&quot;: &quot;[variables('location')]&quot;,
      &quot;tags&quot;: {
        &quot;vendor&quot;: &quot;[variables('tags').vendor]&quot;,
        &quot;description&quot;: &quot;[variables('tags').description]&quot;
      },
      &quot;properties&quot;: {
        &quot;publicIPAllocationMethod&quot;: &quot;Dynamic&quot;,
        &quot;dnsSettings&quot;: {
          &quot;domainNameLabel&quot;: &quot;[parameters('vmDnsName')]&quot;
        }
      }
    },
    {
      &quot;type&quot;: &quot;Microsoft.Network/virtualNetworks&quot;,
      &quot;name&quot;: &quot;[variables('vnet').name]&quot;,
      &quot;apiVersion&quot;: &quot;2016-03-30&quot;,
      &quot;location&quot;: &quot;[variables('location')]&quot;,
      &quot;tags&quot;: {
        &quot;vendor&quot;: &quot;[variables('tags').vendor]&quot;,
        &quot;description&quot;: &quot;[variables('tags').description]&quot;
      },
      &quot;dependsOn&quot;: [
        &quot;[concat('Microsoft.Network/networkSecurityGroups/', variables('networkSecurityGroupName'))]&quot;
      ],
      &quot;properties&quot;: {
        &quot;addressSpace&quot;: {
          &quot;addressPrefixes&quot;: [
            &quot;[variables('vnet').addressPrefix]&quot;
          ]
        },
        &quot;subnets&quot;: [
          {
            &quot;name&quot;: &quot;[variables('vnet').subnet.name]&quot;,
            &quot;properties&quot;: {
              &quot;addressPrefix&quot;: &quot;[variables('vnet').subnet.addressPrefix]&quot;,
              &quot;networkSecurityGroup&quot;: {
                &quot;id&quot;: &quot;[resourceId('Microsoft.Network/networkSecurityGroups', variables('networkSecurityGroupName'))]&quot;
              }
            }
          }
        ]
      }
    },
    {
      &quot;type&quot;: &quot;Microsoft.Network/networkInterfaces&quot;,
      &quot;name&quot;: &quot;[variables('nic').name]&quot;,
      &quot;apiVersion&quot;: &quot;2016-03-30&quot;,
      &quot;location&quot;: &quot;[variables('location')]&quot;,
      &quot;tags&quot;: {
        &quot;vendor&quot;: &quot;[variables('tags').vendor]&quot;,
        &quot;description&quot;: &quot;[variables('tags').description]&quot;
      },
      &quot;dependsOn&quot;: [
        &quot;[concat('Microsoft.Network/virtualNetworks/', variables('vnet').name)]&quot;,
        &quot;[concat('Microsoft.Network/publicIPAddresses/', variables('publicIPAddressName'))]&quot;,
        &quot;[concat('Microsoft.Network/networkSecurityGroups/', variables('networkSecurityGroupName'))]&quot;
      ],
      &quot;properties&quot;: {
        &quot;ipConfigurations&quot;: [
          {
            &quot;name&quot;: &quot;[variables('nic').ipConfigName]&quot;,
            &quot;properties&quot;: {
              &quot;privateIPAllocationMethod&quot;: &quot;Dynamic&quot;,
              &quot;publicIPAddress&quot;: {
                &quot;id&quot;: &quot;[resourceId('Microsoft.Network/publicIPAddresses', variables('publicIPAddressName'))]&quot;
              },
              &quot;subnet&quot;: {
                &quot;id&quot;: &quot;[concat(resourceId('Microsoft.Network/virtualNetworks', variables('vnet').name), '/subnets/', variables('vnet').subnet.name)]&quot;
              }
            }
          }
        ]
      }
    },
    {
      &quot;type&quot;: &quot;Microsoft.Compute/virtualMachines&quot;,
      &quot;name&quot;: &quot;[variables('vmName')]&quot;,
      &quot;apiVersion&quot;: &quot;2016-04-30-preview&quot;,
      &quot;location&quot;: &quot;[variables('location')]&quot;,
      &quot;tags&quot;: {
        &quot;vendor&quot;: &quot;[variables('tags').vendor]&quot;,
        &quot;description&quot;: &quot;[variables('tags').description]&quot;
      },
      &quot;dependsOn&quot;: [
        &quot;[concat('Microsoft.Storage/storageAccounts/', variables('diagnostics').storageAccount.name)]&quot;,
        &quot;[concat('Microsoft.Network/networkInterfaces/', variables('nic').name)]&quot;
      ],
      &quot;properties&quot;: {
        &quot;hardwareProfile&quot;: {
          &quot;vmSize&quot;: &quot;[parameters('vmSize')]&quot;
        },
        &quot;osProfile&quot;: {
          &quot;computerName&quot;: &quot;[variables('vmName')]&quot;,
          &quot;adminUsername&quot;: &quot;[parameters('vmAdminUsername')]&quot;,
          &quot;adminPassword&quot;: &quot;[parameters('vmAdminPassword')]&quot;
        },
        &quot;storageProfile&quot;: {
          &quot;imageReference&quot;: {
            &quot;publisher&quot;: &quot;MicrosoftWindowsServer&quot;,
            &quot;offer&quot;: &quot;WindowsServer&quot;,
            &quot;sku&quot;: &quot;2016-Datacenter&quot;,
            &quot;version&quot;: &quot;latest&quot;
          },
          &quot;osDisk&quot;: {
            &quot;createOption&quot;: &quot;FromImage&quot;,
            &quot;caching&quot;: &quot;ReadWrite&quot;,
            &quot;managedDisk&quot;: {
              &quot;storageAccountType&quot;: &quot;Standard_LRS&quot;
            }
          }
        },
        &quot;networkProfile&quot;: {
          &quot;networkInterfaces&quot;: [
            {
              &quot;id&quot;: &quot;[resourceId('Microsoft.Network/networkInterfaces', variables('nic').name)]&quot;
            }
          ]
        },
        &quot;diagnosticsProfile&quot;: {
          &quot;bootDiagnostics&quot;: {
            &quot;enabled&quot;: true,
            &quot;storageUri&quot;: &quot;[concat('http://', variables('diagnostics').storageAccount.name, '.blob.core.windows.net')]&quot;
          }
        }
      }
    },
    {
      &quot;type&quot;: &quot;Microsoft.Compute/virtualMachines/extensions&quot;,
      &quot;name&quot;: &quot;[concat(variables('vmName'),'/dscExtension')]&quot;,
      &quot;apiVersion&quot;: &quot;2015-05-01-preview&quot;,
      &quot;location&quot;: &quot;[resourceGroup().location]&quot;,
      &quot;dependsOn&quot;: [
        &quot;[concat('Microsoft.Compute/virtualMachines/', variables('vmName'))]&quot;
      ],
      &quot;properties&quot;: {
        &quot;publisher&quot;: &quot;Microsoft.Powershell&quot;,
        &quot;type&quot;: &quot;DSC&quot;,
        &quot;typeHandlerVersion&quot;: &quot;2.20&quot;,
        &quot;autoUpgradeMinorVersion&quot;: true,
        &quot;forceUpdateTag&quot;: &quot;2&quot;,
         &quot;settings&quot;: {
            &quot;configuration&quot;: {
                &quot;url&quot;: &quot;https://myfilehost.example.com/OctopusTentacle.zip&quot;,
                &quot;script&quot;: &quot;OctopusTentacle.ps1&quot;,
                &quot;function&quot;: &quot;OctopusTentacle&quot;
            },
            &quot;configurationArguments&quot;: {
                &quot;ApiKey&quot;: &quot;[parameters('tentacleApiKey')]&quot;,
                &quot;OctopusServerUrl&quot;: &quot;[parameters('tentacleOctopusServerUrl')]&quot;,
                &quot;Environments&quot;: &quot;[parameters('tentacleEnvironments')]&quot;,
                &quot;Roles&quot;: &quot;[parameters('tentacleRoles')]&quot;,
                &quot;ServerPort&quot;: &quot;[parameters('tentaclePort')]&quot;
            }
        },
        &quot;protectedSettings&quot;: null
      }
    }
  ]
}
</code></pre>
<p>If you are using your own template, and not the sample above, you can just add the resource to your existing template:</p>
<pre><code class="language-json">{
      &quot;type&quot;: &quot;Microsoft.Compute/virtualMachines/extensions&quot;,
      &quot;name&quot;: &quot;[concat(variables('vmName'),'/dscExtension')]&quot;,
      &quot;apiVersion&quot;: &quot;2015-05-01-preview&quot;,
      &quot;location&quot;: &quot;[resourceGroup().location]&quot;,
      &quot;dependsOn&quot;: [
        &quot;[concat('Microsoft.Compute/virtualMachines/', variables('vmName'))]&quot;
      ],
      &quot;properties&quot;: {
        &quot;publisher&quot;: &quot;Microsoft.Powershell&quot;,
        &quot;type&quot;: &quot;DSC&quot;,
        &quot;typeHandlerVersion&quot;: &quot;2.20&quot;,
        &quot;autoUpgradeMinorVersion&quot;: true,
        &quot;forceUpdateTag&quot;: &quot;2&quot;,
         &quot;settings&quot;: {
            &quot;configuration&quot;: {
                &quot;url&quot;: &quot;https://myfilehost.example.com/OctopusTentacle.zip&quot;,
                &quot;script&quot;: &quot;OctopusTentacle.ps1&quot;,
                &quot;function&quot;: &quot;OctopusTentacle&quot;
            },
            &quot;configurationArguments&quot;: {
                &quot;ApiKey&quot;: &quot;[parameters('tentacleApiKey')]&quot;,
                &quot;OctopusServerUrl&quot;: &quot;[parameters('tentacleOctopusServerUrl')]&quot;,
                &quot;Environments&quot;: &quot;[parameters('tentacleEnvironments')]&quot;,
                &quot;Roles&quot;: &quot;[parameters('tentacleRoles')]&quot;,
                &quot;ServerPort&quot;: &quot;[parameters('tentaclePort')]&quot;
            }
        },
        &quot;protectedSettings&quot;: null
      }
    }
</code></pre>
<p>Note that if you are using a private Azure storage location that requires a SAS Token, add this under <code>protectedSettings</code> as <code>configurationUrlSasToken</code>.</p>
<ol start="6">
<li>Create an ARM template properties file (eg <code>arm-template.properties.json</code>) with the parameters you need:</li>
</ol>
<pre><code class="language-json">{
  &quot;$schema&quot;: &quot;http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#&quot;,
  &quot;contentVersion&quot;: &quot;1.0.0.0&quot;,
  &quot;parameters&quot;: {
    &quot;vmAdminUsername&quot;: {
      &quot;value&quot;: &quot;AdminUser&quot;
    },
    &quot;vmAdminPassword&quot;: {
      &quot;value&quot;: &quot;MySuperSecretPassw0rd&quot;
    },
    &quot;vmDnsName&quot;: {
      &quot;value&quot;: &quot;mytentaclevm&quot;
    },
    &quot;vmSize&quot;: {
      &quot;value&quot;: &quot;Standard_D2_v2&quot;
    },
    &quot;tentacleOctopusServerUrl&quot;: {
      &quot;value&quot;: &quot;https://octopus.example.com&quot;
    },
    &quot;tentacleApiKey&quot;: {
      &quot;value&quot;: &quot;API-ABCDEFG1234567890&quot;
    },
    &quot;tentacleCommunicationMode&quot;: {
      &quot;value&quot;: &quot;Poll&quot;
    },
    &quot;tentaclePort&quot;: {
      &quot;value&quot;: 10943
    },
    &quot;tentacleRoles&quot;: {
      &quot;value&quot;: &quot;app-server&quot;
    },
    &quot;tentacleEnvironments&quot;: {
      &quot;value&quot;: &quot;Development&quot;
    },
    &quot;tentaclePublicHostNameConfiguration&quot;: {
      &quot;value&quot;: &quot;PublicIP&quot;
    },
    &quot;tentacleCustomPublicHostName&quot;: {
      &quot;value&quot;: &quot;&quot;
    }
  }
}
</code></pre>
<p>To deploy the template, you can use the <a href="https://docs.microsoft.com/cli/azure/install-az-cli2" rel="nofollow">Azure CLI</a>:</p>
<pre><code class="language-bash">az login
az account set --subscription 'xxxxxxxxxxx'
az group create --name &quot;OctopusDeployTentacle&quot; --location &quot;Australia East&quot;
az group deployment create \
    --name &quot;DeployTentacle&quot; \
    --resource-group &quot;OctopusDeployTentacle&quot; \
    --template-file &quot;arm-template.json&quot; \
    --parameters &quot;@arm-template.parameters.json&quot;
</code></pre>
</div>
</div>
<div class="col-md-3" style="padding-bottom: 100px">
<div class="panel panel-info documentation">
<div class="panel-heading">
<div class="panel-title">
<a href="/docs">Documentation</a>
<div style="margin-top: -3px; margin-bottom: 0" class="dropdown pull-right">
<button class="btn btn-info btn-xs dropdown-toggle" type="button" id="versionSelector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
Latest
<span class="caret"></span>
</button>
<ul class="dropdown-menu" aria-labelledby="versionSelector"><li class=''><a href='/docs/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>Latest</a></li><li class=''><a href='/docs/v/3.14/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.14</a></li><li class=''><a href='/docs/v/3.13/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.13</a></li><li class=''><a href='/docs/v/3.12/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.12</a></li><li class=''><a href='/docs/v/3.11/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.11</a></li><li class=''><a href='/docs/v/3.10/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.10</a></li><li class=''><a href='/docs/v/3.9/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.9</a></li><li class=''><a href='/docs/v/3.8/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.8</a></li><li class='disabled'><a href='/docs/v/3.7/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.7</a></li><li class=''><a href='/docs/v/3.6/installation/installing-tentacles/azure-virtual-machines/via-an-arm-template-with-dsc'>3.6</a></li></ul>
</div>
</div>
</div>
<div class="panel-body">
<form action="/search" method="get"> <div class="form-search search-only">
<i class="search-icon fa fa-search"></i>
<input id="context" name="context" type="hidden" value="docs">
<input class="form-control search-query" id="q" name="q" placeholder="Search" type="text" value="">
</div>
</form>
<div class="sidebar">
<ul>
<li>
<a class=" " href="/docs/getting-started">Getting started</a>
</li>
<li>
<a class=" has-children" href="/docs/installation">Installation</a>
</li>
<li>
<a class=" has-children" href="/docs/key-concepts">Key Concepts</a>
</li>
<li>
<a class=" has-children" href="/docs/packaging-applications">Packaging applications</a>
</li>
<li>
<a class=" has-children" href="/docs/deployment-targets">Deployment targets</a>
</li>
<li>
<a class=" has-children" href="/docs/deploying-applications">Deploying applications</a>
</li>
<li>
<a class=" has-children" href="/docs/api-and-integration">API and Integration</a>
</li>
<li>
<a class=" has-children" href="/docs/patterns">Patterns</a>
</li>
<li>
<a class=" has-children" href="/docs/administration">Administration</a>
</li>
<li>
<a class=" has-children" href="/docs/reference">Reference</a>
</li>
<li>
<a class=" has-children" href="/docs/how-to">How to</a>
</li>
<li>
<a class=" has-children" href="/docs/guides">Guides</a>
</li>
</ul>
</div>
</div>
</div>
<div class="text-center">
<a href="https://github.com/OctopusDeploy/docs/blob/master/docs/index.md" class="tutorial" rel="nofollow">Edit this page on GitHub</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="bottom">
<div id="footer">
<div class="container">
<div class="row">
<div class="col-md-3">
<strong>Octopus Deploy</strong>
<p>
<a href="/company/about">Company</a>
<br>
<a href="/company/testimonials">Testimonials</a>
<br>
<a href="/company/roadmap">Roadmap</a>
<br>
<a href="/privacy">Privacy policy</a>
<br>
<a href="/company/team">Team</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/docs" style="color: inherit">Documentation</a></strong>
<p>
<a href="/docs/getting-started">
Getting started
</a>
<br>
<a href="/docs/packaging-applications">
Packaging
</a>
<br>
<a href="/docs/deploying-applications">
Deploying applications
</a>
<br>
<a href="/docs/api-and-integration">
REST API and integration
</a>
<br>
<a href="/docs/how-to">
How to
</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/support" style="color: inherit">Help &amp; Support</a></strong>
<p>
<a href="http://help.octopusdeploy.com/discussions/problems" class="external">
Problems
</a>
<br>
<a href="http://help.octopusdeploy.com/discussions/questions" class="external">
Questions
</a>
<br>
<a href="https://octopusdeploy.uservoice.com/" class="external">
Suggestions
</a>
<br>
<a href="/videos">
Videos
</a>
<br>
<a href="/company/partners">
Partners
</a>
</p>
</div>
<div class="col-md-3" style="text-align: left">
<strong>Follow us</strong>
<p>
<a href="https://twitter.com/OctopusDeploy"><i class="fa fa-fw fa-twitter" style='color: rgb(85, 172, 238);'></i> @OctopusDeploy</a><br>
<a href="https://github.com/OctopusDeploy"><i class="fa fa-fw fa-github" style='color: white'></i> OctopusDeploy</a><br>
<a href="http://www.youtube.com/c/Octopusdeploy"><i class="fa fa-fw fa-youtube-play" style='color: #D52423'></i> YouTube</a><br>
<a href="http://feeds.feedburner.com/OctopusDeploy"><i class="fa fa-fw fa-rss" style='color: orange'></i> Octopus Deploy Blog</a><br>
<a href="https://confirmsubscription.com/h/d/740FABA4D5BBCE4B"><i class="fa fa-fw fa-envelope" style='color: #7BD678'></i> Newsletter</a><br>
</p>
</div>
</div>
</div>
</div>
</div>
<script src="https://octopus.com/bundles/jquery?v=G3cMxyHQisnfgHNXEHQ14yIRldK7D4FD5TlU9xTesBI1"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.js" integrity="sha256-zTDNEf7J+bPdCSndhy8DppFjxfRGG5BFJW5obpl0XQs=" crossorigin="anonymous"></script>
<script type="text/javascript">
    (function ($) {
        var ts;

        $("div.navbar-fixed-top").autoHidingNavbar();
            
        $.featherlight.defaults.closeOnClick = 'anywhere';
        $.featherlight.defaults.afterOpen = function () {
            ts = + new Date();
            $(window).on('scroll', closeFeatherlightOnScroll);
        };

        function closeFeatherlightOnScroll(event) {
            var nowTs = + new Date();

            if (ts + 500 > nowTs) {
                return;
            }
            $.featherlight.close(event);
            $(window).off('scroll', closeFeatherlightOnScroll);
        }
    })($);
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/sql.min.js" integrity="sha256-J7HuqMJTEc5SsyA8nOP0+kVUMGlQq0LrQAvAVgs1k1E=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/powershell.min.js" integrity="sha256-cRUESDACI7Yr/eSmoHs6zDQu6HmpAkCp0s4xrZ9RnE0=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js" integrity="sha256-putofyQv7OB569xAldpyBnHJ0Uc+7VGp5Us05IgDGss=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/fsharp.min.js" integrity="sha256-EwjgDftHUX2pcHkcn19JrQPazoBiHIDivBrellTCYnA=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/twemoji.min.js" integrity="sha256-Y3KC8juDUsBOzJ3XtOH/sj+BAlF9AQr6pEey+4ibaJ4=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js" integrity="sha256-Gn7MUQono8LUxTfRA0WZzJgTua52Udm1Ifrk5421zkA=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function($) {
            $('time').each(function(i, e) {
                var time = moment($(e).attr('datetime')).fromNow();
                $(e).html(time);
            });

            hljs.initHighlightingOnLoad();

            anchors.options.placement = 'left';
            anchors.add('#doc_content > h1, #doc_content > h2, #doc_content > h3, #doc_content > h4');

            twemoji.parse(document.body,
            {
                size: '16x16',
                base: 'https://cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/'
            });
            
            function canCopyToClipboard() {
                return window.clipboardData && window.clipboardData.setData ||
                    document.queryCommandSupported && document.queryCommandSupported("copy");
            };

            function copyToClipboard(text) {
                if (window.clipboardData && window.clipboardData.setData) {
                    $(window).trigger("copy", e);
                    return clipboardData.setData("Text", text);

                } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
                    var textarea = document.createElement("textarea");
                    textarea.textContent = text;
                    textarea.style.position = "fixed";
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        return document.execCommand("copy");
                    } catch (ex) {
                        console.warn("Copy to clipboard failed.", ex);
                        return false;
                    } finally {
                        document.body.removeChild(textarea);
                    }
                }

                return false;
            };

            if (canCopyToClipboard()) {
                var copyButton =
                    $("<a title=\"Copy to clipboard\" class=\"btnCopy btn btn-default btn-xs\" href=\"#\" role=\"button\">Copy</a>");
                copyButton.click(function (e) {
                    var el = $(this).parent().next().find("code");
                    if (el) {
                        copyToClipboard(el[0].textContent);
                        $(this).attr("title", "Copied!").tooltip("fixTitle").tooltip("show")
                               .attr("title", "Copy to clipboard").tooltip("fixTitle");
                    }
                    e.stopPropagation();
                    return false;
                });

                var wrapperForButton =
                    $("<div class=\"copyToClipboard\"></div>").append(copyButton);

                $("pre").before(wrapperForButton);
                $("a.btnCopy").tooltip();
            }
        })($);
    </script>
 
 
</body>
</html>
