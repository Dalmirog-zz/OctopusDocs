<!DOCTYPE html>
<html lang="en">
<head>
<title>Home - Octopus Deploy</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="Octopus Deploy end user documentation">
<meta name="author" content="Octopus Deploy">
<link href="https://octopus.com/Content/css?v=-4KqQQob8dsL5hdI1n8ITu5WSvQ-X4_-0QjLsU2Qxgo1" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.css" integrity="sha256-Bl4rr1AwUjcb8VvRrdHXqJvRRCyF7oHsgUl74ELjr7k=" crossorigin="anonymous">
<meta name="viewport" content="width=device-width">
<meta property="og:type" content="website">
<meta property="og:title" content="Home - Octopus Deploy">
<meta property="og:description" content="Octopus Deploy end user documentation">
<meta property="og:site_name" content="Octopus Deploy">
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@OctopusDeploy">
<meta name="application-name" content="Octopus Deploy">
<link rel="canonical" href="https://octopus.com/docs">
<link rel="me" type="text/html" href="https://plus.google.com/102650558422902813929?rel=me">
<link rel="me" type="text/html" href="http://feeds.feedburner.com/OctopusDeploy">
<link rel="me" type="text/html" href="https://twitter.com/OctopusDeploy">
<link rel="icon" type="image/png" href="https://octopus.com/content/resources/favicon.png">
<link rel="apple-touch-icon" href="https://octopus.com/content/resources/Octopus-96x96.png">
<link href="http://feeds.feedburner.com/OctopusDeploy" type="application/rss+xml" rel="alternate" title="Octopus Deploy Blog Feed">
<script type="text/javascript">
        !function (a, b, c, d, e, f, g) {
            a.RaygunObject = e, a[e] = a[e] || function () {
                    (a[e].o = a[e].o || []).push(arguments)
                }, f = b.createElement(c), g = b.getElementsByTagName(c)[0],
                f.async = 1, f.src = d, g.parentNode.insertBefore(f, g)
        }(window, document, "script", "//cdn.raygun.io/raygun4js/raygun.min.js", "rg4js");
    </script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous">
<style>
        .btnCopy {
            position: absolute;
            right: 0;
            top: 0;
        }

        .copyToClipboard {
            position: relative;
        }

        @media (min-width: 1200px) {
            .container {
                max-width: 1600px;
                width: 100%;
            }
        }
    </style>
</head>
<body class="">

<script>
        window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
        ga('create', 'UA-24461753-1', 'auto');
        ga('send', 'pageview');
    </script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>


<script type="text/javascript">
        setTimeout(function () {
            var a = document.createElement("script");
            var b = document.getElementsByTagName("script")[0];
            a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0021/2568.js?" + Math.floor(new Date().getTime() / 3600000);
            a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
        }, 1);
    </script>

<div class="top-and-splash">
<div id="top">
<div id="header">
<div class="navbar navbar-fixed-top">
<div class="">
<div class="container">
<div>
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a id="logo" class="navbar-brand" href="/">Octopus Deploy</a>
</div>
<div id="nav-main" class="navbar-collapse collapse">
<div>
<ul class="nav navbar-nav navbar-right">
<li class="">
<a href="/#features">
Features
</a>
</li>
<li class="">
<a href="/downloads">
Downloads
</a>
</li>
<li class="">
<a href="/company/about">
Company
</a>
</li>
<li class="active">
<a href="/docs">
Docs
</a>
</li>
<li class="">
<a href="/support">
Support
</a>
</li>
<li class="">
<a href="/purchase">
Pricing
</a>
</li>
<li class="">
<a href="/blog">Blog</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="middle">
<div id="main">
<div class="stripe stripe-blue">
<div class="container">
<span class="page-title">Octopus Deploy Documentation</span>
</div>
</div>
<div style="padding-left: 16px;" class="stripe stripe-white">
<div class="container">
<div class="row">
<div class="col-md-9">
<div id="doc_content" class="main-content"><h1>SQL Server databases</h1><p>There are a variety of ways that SQL Server databases can be managed in Octopus Deploy. This section will provide a broad outline of the different approaches, and then drill into one possible solution to use as an example.</p>
<div class="alert alert-info"><p><strong>Tentacle Installation Location</strong><br />
For SQL deployments, the SQL server does not require a locally installed Tentacle. You can use any Tentacle installed on any server, so long as it has access to SQL to run the functions you require.</p>
</div>
<h2 id="SQLServerdatabases-Approachestodatabasechangemanagement">Approaches to database change management</h2>
<p>There are two main approaches to managing database definitions and applying differences when deploying:</p>
<ol>
<li>A <strong>model-driven</strong> approach, where you define the desired state of your database in terms of tables and columns. During deployment, a tool compares the model with the actual target database, and then figures out what changes (column additions, table drops, etc.) need to be made to bring the target database in line with the model.</li>
<li>A <strong>change-script-driven</strong> approach, where the scripts to migrate from one version of the schema to the next are kept in source control, and are only ever run once.</li>
</ol>
<p>The model driven approach makes for a great development experience - we can quickly compare our desired model database with a target database, and bring it into line, without needing to write or maintain any scripts. However, this model can begin to fall down - the tool might mistake a column rename as a column drop and add, for example, losing vital data.</p>
<p>When it comes to production deployments, however, there's nothing more reliable than keeping track of exactly the scripts you intend to run, and running them, without trying to compare state and guess. And in fact many model-driven tools are used that way, leading to a hybrid approach of model driven database development, and then change-script driven production deployments.</p>
<h2 id="SQLServerdatabases-Howchangescriptswork">How change scripts work</h2>
<p>The database change script concept has been around for a long time. The core principles are:</p>
<ul>
<li>When you need to make a change to the database, write it in a script</li>
<li>Make sure the script does what you intend - if you rename the LastName column to Surname, make sure the script doesn't do something silly such as dropping the LastName column and add the Surname column without moving any of the data</li>
<li>Name the file sequentially - scripts will always be run in order</li>
<li>A given script will only ever be run against a target database once (i.e., once the script to rename LastName to Surname has been run, it won't be run again, because it would fail</li>
<li>Never change a script once it has been run (or the changes won't be run against the databases it has already been run against)</li>
<li>Run the same set of scripts in every environment that you deploy to</li>
</ul>
<p>The benefits of this are:</p>
<ul>
<li>When deploying to an old environment, you just run the scripts that haven't been run yet</li>
<li>When setting up a new environment, you simply run all the change scripts</li>
<li>When developers need to set up their local workstation, or you need to stand up a database for automated integration testing, guess what - you just run the change scripts</li>
<li>You can write integration tests that actually test that your change scripts work</li>
<li>Since you've run the same scripts in all of your pre-production environment, you can have more confidence that they will work in production (more confidence than if this is the first time the script has ever been run, or if you are supposed to make production schema changes by hand)</li>
<li>Databases are much less likely to have differences in their schema</li>
</ul>
<p>There are many ways of using the change script approach. Entity Framework has migration libraries that can help to do some of this. Some tools have special C# DSL's that let you specify what changes to make between schema versions. Personally, we prefer the simple approach: create T-SQL files, name them sequentially, and use a tool like the open source <a href="http://dbup.github.io/" rel="nofollow">DbUp</a> to run them (it turns out that T-SQL is a pretty awesome DSL for dealing with SQL Server databases!)</p>
<h2 id="SQLServerdatabases-Thirdpartytools">Third party tools</h2>
<h3 id="SQLServerdatabases-RedgateSQLRelease">Redgate SQL Release</h3>
<div class="alert alert-warning"><p><strong>SQL Release has been replaced by DLM Automation</strong><br />
SQL Release has been replaced by DLM Automation, which is available in the <a href="http://www.red-gate.com/products/sql-development/sql-toolbelt/" class="alert-link" rel="nofollow">SQL Toolbelt</a>. For more details, see the documentation for <a href="https://documentation.red-gate.com/display/DLMA1/DLM+Automation+documentation" class="alert-link" rel="nofollow">DLM Automation</a></p>
</div>
<h3 id="SQLServerdatabases-RedgateDLMAutomation">Redgate DLM Automation</h3>
<p>The Redgate Database Lifecycle Management (DLM) Automation tool works with build servers and release management tools to provide continuous integration and automated deployment for your SQL databases. You can control DLM Automation by using the <a href="https://documentation.red-gate.com/display/DLMA2/Cmdlet+reference" rel="nofollow">DLM Automation PowerShell cmdlets</a> or by using one of the <a href="http://www.red-gate.com/dlmas/add-ons-page" rel="nofollow">DLM Automation add-ons</a>. DLM Automation is available in the <a href="http://www.red-gate.com/products/sql-development/sql-toolbelt/" rel="nofollow">SQL Toolbelt</a>.</p>
<p><a href='#' data-featherlight='/docs/images/3048077/5865877.png' class='zoom' data-title=''><img src='/docs/images/3048077/5865877.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<div class="alert alert-info"><p>Learn about <a href="https://documentation.red-gate.com/display/DLMA2/Walkthrough%3A+Set+up+Continuous+Integration+And+Release+Management" class="alert-link" rel="nofollow">using DLM Automation with Octopus Deploy</a>.</p>
</div>
<h3 id="SQLServerdatabases-RedgateReadyRoll">Redgate ReadyRoll</h3>
<p>Redgate ReadyRoll follows the change script approach, and also provides an excellent Visual Studio experience. It has the ability to <a href="http://doc.ready-roll.com/display/RRSQLDOC/Octopus+Deploy" rel="nofollow">generate Octopus Deploy-ready NuGet packages</a> and can work in continuous integration/automated build tools.</p>
<p><a href='#' data-featherlight='/docs/images/3048077/3277640.png' class='zoom' data-title=''><img src='/docs/images/3048077/3277640.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<div class="alert alert-info"><p><strong>Learn more about ReadyRoll</strong><br />
You can learn more about <a href="http://doc.ready-roll.com/display/RRSQLDOC/Octopus+Deploy" class="alert-link" rel="nofollow">Redgate ReadyRoll's Octopus Deploy support</a> in their documentation.</p>
</div>
<h3 id="SQLServerdatabases-DbUp">DbUp</h3>
<p>The open source tool <a href="http://dbup.github.io/" rel="nofollow">DbUp</a>, built by members of the Octopus Deploy team and other contributors, is another alternative. This 8 minute video (with captions) demonstrates how DbUp and Octopus Deploy can be used together to perform database deployments:</p>
<iframe width="640" height="360" src="https://www.youtube.com/embed/mFnN8eLs3c8" frameborder="0" allowfullscreen></iframe>
<h3 id="SQLServerdatabases-VisualStudioDatabaseProjects">Visual Studio Database Projects</h3>
<p>Raffaele Garofalo has a blog post detailing <a href="http://blog.raffaeu.com/archive/2013/10/17/deploy-database-project-using-octopus.aspx" rel="nofollow">how to deploy Visual Studio Database Projects with Octopus</a>.</p>
<h3 id="SQLServerdatabases-EntityFrameworkMigrations">Entity Framework Migrations</h3>
<p>Kevin Kuszyk has a blog post about <a href="http://www.kevinkuszyk.com/2016/10/26/deploying-sql-databases-using-entity-framework-migrations-and-octopus-deploy/" rel="nofollow">deploying SQL databases using Entity Framework migrations and Octopus Deploy</a>.</p>
<h3 id="SQLServerdatabases-RoundhousE">RoundhousE</h3>
<p>Ben Tillman has a walkthrough on <a href="http://blog.bentillman.net/deploying-db-migrations-with-octopus-deploy-and-roundhouse/" rel="nofollow">how to deploy database migrations with RoundhousE</a>.</p>
</div>
</div>
<div class="col-md-3" style="padding-bottom: 100px">
<div class="panel panel-info documentation">
<div class="panel-heading">
<div class="panel-title">
<a href="/docs">Documentation</a>
<div style="margin-top: -3px; margin-bottom: 0" class="dropdown pull-right">
<button class="btn btn-info btn-xs dropdown-toggle" type="button" id="versionSelector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
Latest
<span class="caret"></span>
</button>
<ul class="dropdown-menu" aria-labelledby="versionSelector"><li class=''><a href='/docs/deploying-applications/sql-server-databases'>Latest</a></li><li class=''><a href='/docs/v/3.15/deploying-applications/sql-server-databases'>3.15</a></li><li class=''><a href='/docs/v/3.14/deploying-applications/sql-server-databases'>3.14</a></li><li class=''><a href='/docs/v/3.13/deploying-applications/sql-server-databases'>3.13</a></li><li class='disabled'><a href='/docs/v/3.12/deploying-applications/sql-server-databases'>3.12</a></li><li class=''><a href='/docs/v/3.11/deploying-applications/sql-server-databases'>3.11</a></li><li class=''><a href='/docs/v/3.10/deploying-applications/sql-server-databases'>3.10</a></li><li class=''><a href='/docs/v/3.9/deploying-applications/sql-server-databases'>3.9</a></li><li class=''><a href='/docs/v/3.8/deploying-applications/sql-server-databases'>3.8</a></li><li class=''><a href='/docs/v/3.7/deploying-applications/sql-server-databases'>3.7</a></li><li class=''><a href='/docs/v/3.6/deploying-applications/sql-server-databases'>3.6</a></li></ul>
</div>
</div>
</div>
<div class="panel-body">
<form action="/search" method="get"> <div class="form-search search-only">
<i class="search-icon fa fa-search"></i>
<input id="context" name="context" type="hidden" value="docs">
<input class="form-control search-query" id="q" name="q" placeholder="Search" type="text" value/="">
</div>
</form>
<div class="sidebar">
<ul>
<li>
<a class=" " href="/docs/getting-started">Getting started</a>
</li>
<li>
<a class=" has-children" href="/docs/installation">Installation</a>
</li>
<li>
<a class=" has-children" href="/docs/key-concepts">Key Concepts</a>
</li>
<li>
<a class=" has-children" href="/docs/packaging-applications">Packaging applications</a>
</li>
<li>
<a class=" has-children" href="/docs/deployment-targets">Deployment targets</a>
</li>
<li>
<a class=" has-children" href="/docs/deploying-applications">Deploying applications</a>
</li>
<li>
<a class=" has-children" href="/docs/api-and-integration">API and Integration</a>
</li>
<li>
<a class=" has-children" href="/docs/patterns">Patterns</a>
</li>
<li>
<a class=" has-children" href="/docs/administration">Administration</a>
</li>
<li>
<a class=" has-children" href="/docs/reference">Reference</a>
</li>
<li>
<a class=" has-children" href="/docs/how-to">How to</a>
</li>
<li>
<a class=" has-children" href="/docs/guides">Guides</a>
</li>
</ul>
</div>
</div>
</div>
<div class="text-center">
<a href="https://github.com/OctopusDeploy/docs/blob/master/docs/index.md" class="tutorial" rel="nofollow">Edit this page on GitHub</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="bottom">
<div id="footer">
<div class="container">
<div class="row">
<div class="col-md-3">
<strong>Octopus Deploy</strong>
<p>
<a href="/company/about">Company</a>
<br>
<a href="/company/testimonials">Testimonials</a>
<br>
<a href="/company/roadmap">Roadmap</a>
<br>
<a href="/privacy">Privacy policy</a>
<br>
<a href="/company/team">Team</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/docs" style="color: inherit">Documentation</a></strong>
<p>
<a href="/docs/getting-started">
Getting started
</a>
<br>
<a href="/docs/packaging-applications">
Packaging
</a>
<br>
<a href="/docs/deploying-applications">
Deploying applications
</a>
<br>
<a href="/docs/api-and-integration">
REST API and integration
</a>
<br>
<a href="/docs/how-to">
How to
</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/support" style="color: inherit">Help &amp; Support</a></strong>
<p>
<a href="http://help.octopusdeploy.com/discussions/problems" class="external">
Problems
</a>
<br>
<a href="http://help.octopusdeploy.com/discussions/questions" class="external">
Questions
</a>
<br>
<a href="https://octopusdeploy.uservoice.com/" class="external">
Suggestions
</a>
<br>
<a href="/videos">
Videos
</a>
<br>
<a href="/company/partners">
Partners
</a>
</p>
</div>
<div class="col-md-3" style="text-align: left">
<strong>Follow us</strong>
<p>
<a href="https://twitter.com/OctopusDeploy"><i class="fa fa-fw fa-twitter" style="color: rgb(85, 172, 238);"></i> @OctopusDeploy</a><br>
<a href="https://github.com/OctopusDeploy"><i class="fa fa-fw fa-github" style="color: white"></i> OctopusDeploy</a><br>
<a href="http://www.youtube.com/c/Octopusdeploy"><i class="fa fa-fw fa-youtube-play" style="color: #D52423"></i> YouTube</a><br>
<a href="http://feeds.feedburner.com/OctopusDeploy"><i class="fa fa-fw fa-rss" style="color: orange"></i> Octopus Deploy Blog</a><br>
<a href="https://confirmsubscription.com/h/d/740FABA4D5BBCE4B"><i class="fa fa-fw fa-envelope" style="color: #7BD678"></i> Newsletter</a><br>
</p>
</div>
</div>
</div>
</div>
</div>
<script src="https://octopus.com/bundles/jquery?v=cnl66tdQfXzonUpL0zSMnDJgJiJJfXbV8tKD-S_8H_Q1"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.js" integrity="sha256-zTDNEf7J+bPdCSndhy8DppFjxfRGG5BFJW5obpl0XQs=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function ($) {
            var ts;

            $("div.navbar-fixed-top").autoHidingNavbar();

            $.featherlight.defaults.closeOnClick = 'anywhere';
            $.featherlight.defaults.afterOpen = function () {
                ts = + new Date();
                $(window).on('scroll', closeFeatherlightOnScroll);
            };

            function closeFeatherlightOnScroll(event) {
                var nowTs = + new Date();

                if (ts + 500 > nowTs) {
                    return;
                }
                $.featherlight.close(event);
                $(window).off('scroll', closeFeatherlightOnScroll);
            }
        })($);
    </script>
 <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/sql.min.js" integrity="sha256-J7HuqMJTEc5SsyA8nOP0+kVUMGlQq0LrQAvAVgs1k1E=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/powershell.min.js" integrity="sha256-cRUESDACI7Yr/eSmoHs6zDQu6HmpAkCp0s4xrZ9RnE0=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js" integrity="sha256-putofyQv7OB569xAldpyBnHJ0Uc+7VGp5Us05IgDGss=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/fsharp.min.js" integrity="sha256-EwjgDftHUX2pcHkcn19JrQPazoBiHIDivBrellTCYnA=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/twemoji.min.js" integrity="sha256-Y3KC8juDUsBOzJ3XtOH/sj+BAlF9AQr6pEey+4ibaJ4=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js" integrity="sha256-Gn7MUQono8LUxTfRA0WZzJgTua52Udm1Ifrk5421zkA=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function($) {
            $('time').each(function(i, e) {
                var time = moment($(e).attr('datetime')).fromNow();
                $(e).html(time);
            });

            hljs.initHighlightingOnLoad();

            anchors.options.placement = 'left';
            anchors.add('#doc_content > h1, #doc_content > h2, #doc_content > h3, #doc_content > h4');

            twemoji.parse(document.body,
            {
                size: '16x16',
                base: 'https://cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/'
            });
            
            function canCopyToClipboard() {
                return window.clipboardData && window.clipboardData.setData ||
                    document.queryCommandSupported && document.queryCommandSupported("copy");
            };

            function copyToClipboard(text) {
                if (window.clipboardData && window.clipboardData.setData) {
                    $(window).trigger("copy", e);
                    return clipboardData.setData("Text", text);

                } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
                    var textarea = document.createElement("textarea");
                    textarea.textContent = text;
                    textarea.style.position = "fixed";
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        return document.execCommand("copy");
                    } catch (ex) {
                        console.warn("Copy to clipboard failed.", ex);
                        return false;
                    } finally {
                        document.body.removeChild(textarea);
                    }
                }

                return false;
            };

            if (canCopyToClipboard()) {
                var copyButton =
                    $("<a title=\"Copy to clipboard\" class=\"btnCopy btn btn-default btn-xs\" href=\"#\" role=\"button\">Copy</a>");
                copyButton.click(function (e) {
                    var el = $(this).parent().next().find("code");
                    if (el) {
                        copyToClipboard(el[0].textContent);
                        $(this).attr("title", "Copied!").tooltip("fixTitle").tooltip("show")
                               .attr("title", "Copy to clipboard").tooltip("fixTitle");
                    }
                    e.stopPropagation();
                    return false;
                });

                var wrapperForButton =
                    $("<div class=\"copyToClipboard\"></div>").append(copyButton);

                $("pre").before(wrapperForButton);
                $("a.btnCopy").tooltip();
            }
        })($);
    </script>
<script type="text/javascript">
        rg4js('apiKey', 'x6kh9H0AxbqPLcjQVaOZNQ==');
        rg4js('enablePulse', true);
        rg4js('enableCrashReporting', true);
    </script>


</body>
</html>
