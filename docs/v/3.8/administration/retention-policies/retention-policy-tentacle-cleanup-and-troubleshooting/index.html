<!DOCTYPE html>
<html lang="en">
<head>
<title>Home - Octopus Deploy</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="Octopus Deploy end user documentation">
<meta name="author" content="Octopus Deploy">
<link href="https://octopus.com/Content/css?v=-4KqQQob8dsL5hdI1n8ITu5WSvQ-X4_-0QjLsU2Qxgo1" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.css" integrity="sha256-Bl4rr1AwUjcb8VvRrdHXqJvRRCyF7oHsgUl74ELjr7k=" crossorigin="anonymous">
<meta name="viewport" content="width=device-width">
<meta property="og:type" content="website">
<meta property="og:title" content="Home - Octopus Deploy">
<meta property="og:description" content="Octopus Deploy end user documentation">
<meta property="og:site_name" content="Octopus Deploy">
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@OctopusDeploy">
<meta name="application-name" content="Octopus Deploy">
<link rel="canonical" href="https://octopus.com/docs">
<link rel="me" type="text/html" href="https://plus.google.com/102650558422902813929?rel=me">
<link rel="me" type="text/html" href="http://feeds.feedburner.com/OctopusDeploy">
<link rel="me" type="text/html" href="https://twitter.com/OctopusDeploy">
<link rel="icon" type="image/png" href="https://octopus.com/content/resources/favicon.png">
<link rel="apple-touch-icon" href="https://octopus.com/content/resources/Octopus-96x96.png">
<link href="http://feeds.feedburner.com/OctopusDeploy" type="application/rss+xml" rel="alternate" title="Octopus Deploy Blog Feed">
<script type="text/javascript">
        !function (a, b, c, d, e, f, g) {
            a.RaygunObject = e, a[e] = a[e] || function () {
                    (a[e].o = a[e].o || []).push(arguments)
                }, f = b.createElement(c), g = b.getElementsByTagName(c)[0],
                f.async = 1, f.src = d, g.parentNode.insertBefore(f, g)
        }(window, document, "script", "//cdn.raygun.io/raygun4js/raygun.min.js", "rg4js");
    </script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous">
<style>
        .btnCopy {
            position: absolute;
            right: 0;
            top: 0;
        }

        .copyToClipboard {
            position: relative;
        }

        @media (min-width: 1200px) {
            .container {
                max-width: 1600px;
                width: 100%;
            }
        }
    </style>
</head>
<body class="">

<script>
        window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
        ga('create', 'UA-24461753-1', 'auto');
        ga('send', 'pageview');
    </script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>


<script type="text/javascript">
        setTimeout(function () {
            var a = document.createElement("script");
            var b = document.getElementsByTagName("script")[0];
            a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0021/2568.js?" + Math.floor(new Date().getTime() / 3600000);
            a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
        }, 1);
    </script>

<div class="top-and-splash">
<div id="top">
<div id="header">
<div class="navbar navbar-fixed-top">
<div class="">
<div class="container">
<div>
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a id="logo" class="navbar-brand" href="/">Octopus Deploy</a>
</div>
<div id="nav-main" class="navbar-collapse collapse">
<div>
<ul class="nav navbar-nav navbar-right">
<li class="">
<a href="/#features">
Features
</a>
</li>
<li class="">
<a href="/downloads">
Downloads
</a>
</li>
<li class="">
<a href="/company/about">
Company
</a>
</li>
<li class="active">
<a href="/docs">
Docs
</a>
</li>
<li class="">
<a href="/support">
Support
</a>
</li>
<li class="">
<a href="/purchase">
Pricing
</a>
</li>
<li class="">
<a href="/blog">Blog</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="middle">
<div id="main">
<div class="stripe stripe-blue">
<div class="container">
<span class="page-title">Octopus Deploy Documentation</span>
</div>
</div>
<div style="padding-left: 16px;" class="stripe stripe-white">
<div class="container">
<div class="row">
<div class="col-md-9">
<div id="doc_content" class="main-content"><h1>Retention policy Tentacle cleanup and troubleshooting</h1><p>We get a lot of questions about why isn't the retention policy deleting all of my files on the Tentacle, or reporting a bug because files weren't deleted.</p>
<p>This page will show what is checked, what is deleted and why something might not be deleted.</p>
<h2 id="RetentionpolicyTentaclecleanupandtroubleshooting-DeploymentJournal">Deployment Journal</h2>
<p>The deployment journal on the Tentacle is the source of truth for what Octopus will know has been deployed to the Tentacle but more importantly what still exists on the Tentacle.</p>
<p>If the deployment journal is deleted, on the next deployment, it will be created and contain one record. But you might have many more deployments than that on the server. If the release is not in the DeploymentJournal.xml it will not be deleted with the execution of the retention policy. Any deployments not in the deployment journal will need to be manually deleted.</p>
<p>You can find your deployment journal in: C:\Octopus&lt;machine name&gt;\DeploymentJournal.xml
C:\Octopus is for default installations, and the registered Tentacle machine name is the name of the folder. In our sample case it is DWebApp01. If you have more than 1 Tentacle instance on the machine they will have their own deployment journal files.</p>
<p><a href='#' data-featherlight='/docs/images/3048641/3278384.png' class='zoom' data-title=''><img src='/docs/images/3048641/3278384.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>Below is a sample DeploymentJournal.xml that we will use in this example.</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;Deployments&gt;

  &lt;Deployment Id=&quot;8edf23f3-225a-44ff-849b-a9e8b9cd9be5&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.Database&quot; PackageVersion=&quot;3.0.938&quot; InstalledOn=&quot;2015-08-31 02:06:18&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.Database.3.0.938.nupkg-7e3882e6-d08a-497b-a64a-dc9f14a48bf0&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.938&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Database/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.938&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;3e16c611-4e06-4b5b-a453-8af5b82ae011&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.RateService&quot; PackageVersion=&quot;3.0.938&quot; InstalledOn=&quot;2015-08-31 02:06:23&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.RateService.3.0.938.nupkg-33168819-e693-4aa2-8a90-41a772990e98&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.938&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Rate service/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.938&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;65521b1d-3fff-4c6e-aa1a-b0902148bdf7&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-2&quot; PackageId=&quot;OctoFX.TradingWebsite&quot; PackageVersion=&quot;3.0.938&quot; InstalledOn=&quot;2015-08-31 02:06:42&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.TradingWebsite.3.0.938.nupkg-76cbe5ea-2db2-4296-afa5-073acc4e2944&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.TradingWebsite\3.0.938&quot; RetentionPolicySet=&quot;Environments-4/Projects-2/Step-Trading Website/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Websites\DWebApp01\TradingWebsite&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;ee3da487-e32a-4b61-aa81-1375527f97ee&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.Database&quot; PackageVersion=&quot;3.0.939&quot; InstalledOn=&quot;2015-08-31 03:06:04&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.Database.3.0.939.nupkg-6558d7f1-9647-4790-9dcf-f72599a3e1f0&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.939&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Database/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.939&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;11516f98-488f-4178-9c33-bf4af593e9c3&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.RateService&quot; PackageVersion=&quot;3.0.939&quot; InstalledOn=&quot;2015-08-31 03:06:10&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.RateService.3.0.939.nupkg-c631069c-2231-4abf-8eb8-402d5aba4e31&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.939&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Rate service/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.939&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;e8dbf933-e60b-4de6-86d4-b210333c2c5f&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-2&quot; PackageId=&quot;OctoFX.TradingWebsite&quot; PackageVersion=&quot;3.0.939&quot; InstalledOn=&quot;2015-08-31 03:06:28&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.TradingWebsite.3.0.939.nupkg-9bc37a9b-d5de-4dc5-a994-bd2cba3de6ba&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.TradingWebsite\3.0.939&quot; RetentionPolicySet=&quot;Environments-4/Projects-2/Step-Trading Website/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Websites\DWebApp01\TradingWebsite&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;c256e7af-a01c-4e4f-a61c-0fecff92e1fd&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.Database&quot; PackageVersion=&quot;3.0.940&quot; InstalledOn=&quot;2015-08-31 04:06:04&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.Database.3.0.940.nupkg-8ac2b355-4eda-4688-89a2-a4b33e34f00a&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.940&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Database/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.940&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;43fd845a-0a4b-4d58-84a4-e7f83bd50e7e&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.RateService&quot; PackageVersion=&quot;3.0.940&quot; InstalledOn=&quot;2015-08-31 04:06:09&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.RateService.3.0.940.nupkg-4ce208ff-19fe-4eb0-bbd1-2f45ce48dc10&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.940&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Rate service/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.940&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;264dae42-4e47-40aa-9521-1a3e373481c0&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-2&quot; PackageId=&quot;OctoFX.TradingWebsite&quot; PackageVersion=&quot;3.0.940&quot; InstalledOn=&quot;2015-08-31 04:06:29&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.TradingWebsite.3.0.940.nupkg-8f5a7177-a6a9-439f-b8aa-d15f0c1fb13f&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.TradingWebsite\3.0.940&quot; RetentionPolicySet=&quot;Environments-4/Projects-2/Step-Trading Website/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Websites\DWebApp01\TradingWebsite&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;ee3e96d9-e82b-4f84-a378-2023ef266f8b&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.Database&quot; PackageVersion=&quot;3.0.941&quot; InstalledOn=&quot;2015-08-31 05:06:14&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.Database.3.0.941.nupkg-b2959e9a-05b2-478a-a499-9bcb6d778afe&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.941&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Database/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.941&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;7f1a1926-eae1-4704-8e85-af31c588c7da&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-1&quot; PackageId=&quot;OctoFX.RateService&quot; PackageVersion=&quot;3.0.941&quot; InstalledOn=&quot;2015-08-31 05:06:19&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.RateService.3.0.941.nupkg-a1740fe7-c686-4a50-b4ff-784e783589f6&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.941&quot; RetentionPolicySet=&quot;Environments-4/Projects-1/Step-Rate service/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.941&quot; WasSuccessful=&quot;True&quot; /&gt;

  &lt;Deployment Id=&quot;effd23a1-3649-440e-a8c9-131f11840fd1&quot; EnvironmentId=&quot;Environments-4&quot; ProjectId=&quot;Projects-2&quot; PackageId=&quot;OctoFX.TradingWebsite&quot; PackageVersion=&quot;3.0.941&quot; InstalledOn=&quot;2015-08-31 05:06:37&quot; ExtractedFrom=&quot;C:\Octopus\DWebApp01\Files\OctoFX.TradingWebsite.3.0.941.nupkg-766ca566-0926-4114-ac11-942a4cb9382b&quot; ExtractedTo=&quot;C:\Octopus\Applications\DWebApp01\Development\OctoFX.TradingWebsite\3.0.941&quot; RetentionPolicySet=&quot;Environments-4/Projects-2/Step-Trading Website/Machines-3/&amp;lt;default&amp;gt;&quot; CustomInstallationDirectory=&quot;C:\Websites\DWebApp01\TradingWebsite&quot; WasSuccessful=&quot;True&quot; /&gt;

&lt;/Deployments&gt;
</code></pre>
<p>It keeps a record for every package and package extraction for each project and the relevant locations.</p>
<h2 id="RetentionpolicyTentaclecleanupandtroubleshooting-DefiningyourretentionpolicyforyourTentacles">Defining your retention policy for your Tentacles</h2>
<p>Defining retention policies is done within Lifecycles. Each phase can have a different setting. So if you want to keep more files on production machines you can.</p>
<p><a href='#' data-featherlight='/docs/images/3048641/3278386.png' class='zoom' data-title=''><img src='/docs/images/3048641/3278386.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>You can read more about <a href="/docs/v/3.8/key-concepts/lifecycles">Lifecycles </a>and <a href="/docs/v/3.8/administration/retention-policies">Retention Policies</a> on their own detailed pages.</p>
<p>In this example the default for the Lifecycle is Keep 3.</p>
<h2 id="RetentionpolicyTentaclecleanupandtroubleshooting-Whentheretentionpolicyisrun">When the retention policy is run</h2>
<p>For a Tentacle the retention policy is run at the end of a deployment, for that project only. So for this example the deployment looks for the project (project-1) and finds all releases within the deployment journal. It finds 4 in total (current is never counted) leaving 3, knowing it just deployed one, it deletes one copy of each package.</p>
<p>So for Project-1 we have 8 packages and directories still remaining on the server after the deployment. The current, and then the 3 defined by the policy. This is for each package. Any packages for other projects (project-2) were not evaluated and not removed, even if it was the same package version. Project 2 is considered it's own trigger for that retention policy, and is assumed to have different variables and transformations, thus a unique set of extracted files.</p>
<p>See below the messages you will have in your raw deployment logs at the end of a deployment to that environment for the specific project:</p>
<pre><code class="language-text">                    |   == Success: Apply retention policy on Tentacles ==
05:06:20   Info     |     Apply retention policies...
05:06:22   Verbose  |     Apply Tentacle Retention Policy completed
                    |   
                    |     Success: DWebApp01
                    |     
                    |       Success: Applying retention policy using 3 Items to set Environments-4/Projects-1/Step-Database/Machines-3/&lt;default&gt;
05:06:21   Verbose  |         Removing directory 'C:\Octopus\Applications\DWebApp01\Development\OctoFX.Database\3.0.937'
05:06:21   Verbose  |         Removing package file 'C:\Octopus\DWebApp01\Files\OctoFX.Database.3.0.937.nupkg-ccdc6e52-9c52-4a28-ab25-5f9b44820eaf'
                    |       
                    |       Success: Applying retention policy using 3 Items to set Environments-4/Projects-1/Step-Rate service/Machines-3/&lt;default&gt;
05:06:22   Verbose  |         Removing directory 'C:\Octopus\Applications\DWebApp01\Development\OctoFX.RateService\3.0.937'
05:06:22   Verbose  |         Removing package file 'C:\Octopus\DWebApp01\Files\OctoFX.RateService.3.0.937.nupkg-840cf056-c7b1-4a71-9159-a2da80fa588b'

</code></pre>
<h2 id="RetentionpolicyTentaclecleanupandtroubleshooting-Packageandextractiondirectories">Package and extraction directories</h2>
<p>You can find your packages under C:\Octopus&lt;machine name&gt;\files</p>
<p><a href='#' data-featherlight='/docs/images/3048641/3278387.png' class='zoom' data-title=''><img src='/docs/images/3048641/3278387.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>Your extracted package files can be found under c:\Octopus\Applications&lt;machine name&gt;&lt;environment name&gt;&lt;package name&gt;\</p>
<p>So if you have multiple packages you will have multiple directories.</p>
<p><a href='#' data-featherlight='/docs/images/3048641/3278389.png' class='zoom' data-title=''><img src='/docs/images/3048641/3278389.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p><a href='#' data-featherlight='/docs/images/3048641/3278388.png' class='zoom' data-title=''><img src='/docs/images/3048641/3278388.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>If you have more directories than you think you should, check if they have a value in the deployment journal, if they do not they will have to be manually deleted.</p>
<p>You can have multiple directories for the same version of each package like the following example:</p>
<p><a href='#' data-featherlight='/docs/images/3048641/3278390.png' class='zoom' data-title=''><img src='/docs/images/3048641/3278390.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>This occurs when you have the same package in two different steps inside a single project. It has two extraction directories, and it is assumed a different set of files (due to variables and transforms). These are considered individual packages. So for a 3 package policy you will have a copy of each version leaving 6 plus the current 2 for a total of 8 directories. Both will be cleaned up within the next release, but both are required to be kept. This can mean a lot of folders if you use the same package in multiple steps.</p>
<h2 id="RetentionpolicyTentaclecleanupandtroubleshooting-Troubleshooting">Troubleshooting</h2>
<p>If you upgraded from 2.x to 3.0 the deployment journal location moved. Your choices are to clean up any old deployments manually, merge your deployment journals to the new location or run this <a href="https://gist.github.com/vanessalove/dbc656b01df40939dcf8" rel="nofollow">Powershell Script</a> on your Tentacles.</p>
<p>If you deleted your deployment journal for any reason, if there are packages and package extraction directories not in the current deployment journal, you will have to delete them manually.</p>
<p>There is a fix in 3.0.21 where the Tentacle was assuming the server release retention policy. If you had deployed to a later phase that had a higher tolerance then deployed back to a lower environment phase, it was keeping the higher phase settings. Upgrading to 3.0.21 and deploying to these environments for the projects should clean up any extra files and folders. This would have been from 2.6.</p>
</div>
</div>
<div class="col-md-3" style="padding-bottom: 100px">
<div class="panel panel-info documentation">
<div class="panel-heading">
<div class="panel-title">
<a href="/docs">Documentation</a>
<div style="margin-top: -3px; margin-bottom: 0" class="dropdown pull-right">
<button class="btn btn-info btn-xs dropdown-toggle" type="button" id="versionSelector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
Latest
<span class="caret"></span>
</button>
<ul class="dropdown-menu" aria-labelledby="versionSelector"><li class=''><a href='/docs/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>Latest</a></li><li class=''><a href='/docs/v/3.14/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.14</a></li><li class=''><a href='/docs/v/3.13/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.13</a></li><li class=''><a href='/docs/v/3.12/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.12</a></li><li class=''><a href='/docs/v/3.11/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.11</a></li><li class=''><a href='/docs/v/3.10/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.10</a></li><li class=''><a href='/docs/v/3.9/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.9</a></li><li class='disabled'><a href='/docs/v/3.8/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.8</a></li><li class=''><a href='/docs/v/3.7/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.7</a></li><li class=''><a href='/docs/v/3.6/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting'>3.6</a></li></ul>
</div>
</div>
</div>
<div class="panel-body">
<form action="/search" method="get"> <div class="form-search search-only">
<i class="search-icon fa fa-search"></i>
<input id="context" name="context" type="hidden" value="docs">
<input class="form-control search-query" id="q" name="q" placeholder="Search" type="text" value/="">
</div>
</form>
<div class="sidebar">
<ul>
<li>
<a class=" " href="/docs/getting-started">Getting started</a>
</li>
<li>
<a class=" has-children" href="/docs/installation">Installation</a>
</li>
<li>
<a class=" has-children" href="/docs/key-concepts">Key Concepts</a>
</li>
<li>
<a class=" has-children" href="/docs/packaging-applications">Packaging applications</a>
</li>
<li>
<a class=" has-children" href="/docs/deployment-targets">Deployment targets</a>
</li>
<li>
<a class=" has-children" href="/docs/deploying-applications">Deploying applications</a>
</li>
<li>
<a class=" has-children" href="/docs/api-and-integration">API and Integration</a>
</li>
<li>
<a class=" has-children" href="/docs/patterns">Patterns</a>
</li>
<li>
<a class=" has-children" href="/docs/administration">Administration</a>
</li>
<li>
<a class=" has-children" href="/docs/reference">Reference</a>
</li>
<li>
<a class=" has-children" href="/docs/how-to">How to</a>
</li>
<li>
<a class=" has-children" href="/docs/guides">Guides</a>
</li>
</ul>
</div>
</div>
</div>
<div class="text-center">
<a href="https://github.com/OctopusDeploy/docs/blob/master/docs/index.md" class="tutorial" rel="nofollow">Edit this page on GitHub</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="bottom">
<div id="footer">
<div class="container">
<div class="row">
<div class="col-md-3">
<strong>Octopus Deploy</strong>
<p>
<a href="/company/about">Company</a>
<br>
<a href="/company/testimonials">Testimonials</a>
<br>
<a href="/company/roadmap">Roadmap</a>
<br>
<a href="/privacy">Privacy policy</a>
<br>
<a href="/company/team">Team</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/docs" style="color: inherit">Documentation</a></strong>
<p>
<a href="/docs/getting-started">
Getting started
</a>
<br>
<a href="/docs/packaging-applications">
Packaging
</a>
<br>
<a href="/docs/deploying-applications">
Deploying applications
</a>
<br>
<a href="/docs/api-and-integration">
REST API and integration
</a>
<br>
<a href="/docs/how-to">
How to
</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/support" style="color: inherit">Help &amp; Support</a></strong>
<p>
<a href="http://help.octopusdeploy.com/discussions/problems" class="external">
Problems
</a>
<br>
<a href="http://help.octopusdeploy.com/discussions/questions" class="external">
Questions
</a>
<br>
<a href="https://octopusdeploy.uservoice.com/" class="external">
Suggestions
</a>
<br>
<a href="/videos">
Videos
</a>
<br>
<a href="/company/partners">
Partners
</a>
</p>
</div>
<div class="col-md-3" style="text-align: left">
<strong>Follow us</strong>
<p>
<a href="https://twitter.com/OctopusDeploy"><i class="fa fa-fw fa-twitter" style="color: rgb(85, 172, 238);"></i> @OctopusDeploy</a><br>
<a href="https://github.com/OctopusDeploy"><i class="fa fa-fw fa-github" style="color: white"></i> OctopusDeploy</a><br>
<a href="http://www.youtube.com/c/Octopusdeploy"><i class="fa fa-fw fa-youtube-play" style="color: #D52423"></i> YouTube</a><br>
<a href="http://feeds.feedburner.com/OctopusDeploy"><i class="fa fa-fw fa-rss" style="color: orange"></i> Octopus Deploy Blog</a><br>
<a href="https://confirmsubscription.com/h/d/740FABA4D5BBCE4B"><i class="fa fa-fw fa-envelope" style="color: #7BD678"></i> Newsletter</a><br>
</p>
</div>
</div>
</div>
</div>
</div>
<script src="https://octopus.com/bundles/jquery?v=cnl66tdQfXzonUpL0zSMnDJgJiJJfXbV8tKD-S_8H_Q1"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.js" integrity="sha256-zTDNEf7J+bPdCSndhy8DppFjxfRGG5BFJW5obpl0XQs=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function ($) {
            var ts;

            $("div.navbar-fixed-top").autoHidingNavbar();

            $.featherlight.defaults.closeOnClick = 'anywhere';
            $.featherlight.defaults.afterOpen = function () {
                ts = + new Date();
                $(window).on('scroll', closeFeatherlightOnScroll);
            };

            function closeFeatherlightOnScroll(event) {
                var nowTs = + new Date();

                if (ts + 500 > nowTs) {
                    return;
                }
                $.featherlight.close(event);
                $(window).off('scroll', closeFeatherlightOnScroll);
            }
        })($);
    </script>
 <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/sql.min.js" integrity="sha256-J7HuqMJTEc5SsyA8nOP0+kVUMGlQq0LrQAvAVgs1k1E=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/powershell.min.js" integrity="sha256-cRUESDACI7Yr/eSmoHs6zDQu6HmpAkCp0s4xrZ9RnE0=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js" integrity="sha256-putofyQv7OB569xAldpyBnHJ0Uc+7VGp5Us05IgDGss=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/fsharp.min.js" integrity="sha256-EwjgDftHUX2pcHkcn19JrQPazoBiHIDivBrellTCYnA=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/twemoji.min.js" integrity="sha256-Y3KC8juDUsBOzJ3XtOH/sj+BAlF9AQr6pEey+4ibaJ4=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js" integrity="sha256-Gn7MUQono8LUxTfRA0WZzJgTua52Udm1Ifrk5421zkA=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function($) {
            $('time').each(function(i, e) {
                var time = moment($(e).attr('datetime')).fromNow();
                $(e).html(time);
            });

            hljs.initHighlightingOnLoad();

            anchors.options.placement = 'left';
            anchors.add('#doc_content > h1, #doc_content > h2, #doc_content > h3, #doc_content > h4');

            twemoji.parse(document.body,
            {
                size: '16x16',
                base: 'https://cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/'
            });
            
            function canCopyToClipboard() {
                return window.clipboardData && window.clipboardData.setData ||
                    document.queryCommandSupported && document.queryCommandSupported("copy");
            };

            function copyToClipboard(text) {
                if (window.clipboardData && window.clipboardData.setData) {
                    $(window).trigger("copy", e);
                    return clipboardData.setData("Text", text);

                } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
                    var textarea = document.createElement("textarea");
                    textarea.textContent = text;
                    textarea.style.position = "fixed";
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        return document.execCommand("copy");
                    } catch (ex) {
                        console.warn("Copy to clipboard failed.", ex);
                        return false;
                    } finally {
                        document.body.removeChild(textarea);
                    }
                }

                return false;
            };

            if (canCopyToClipboard()) {
                var copyButton =
                    $("<a title=\"Copy to clipboard\" class=\"btnCopy btn btn-default btn-xs\" href=\"#\" role=\"button\">Copy</a>");
                copyButton.click(function (e) {
                    var el = $(this).parent().next().find("code");
                    if (el) {
                        copyToClipboard(el[0].textContent);
                        $(this).attr("title", "Copied!").tooltip("fixTitle").tooltip("show")
                               .attr("title", "Copy to clipboard").tooltip("fixTitle");
                    }
                    e.stopPropagation();
                    return false;
                });

                var wrapperForButton =
                    $("<div class=\"copyToClipboard\"></div>").append(copyButton);

                $("pre").before(wrapperForButton);
                $("a.btnCopy").tooltip();
            }
        })($);
    </script>
<script type="text/javascript">
        rg4js('apiKey', 'x6kh9H0AxbqPLcjQVaOZNQ==');
        rg4js('enablePulse', true);
        rg4js('enableCrashReporting', true);
    </script>


</body>
</html>
