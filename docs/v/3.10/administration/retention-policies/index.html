<!DOCTYPE html>
<html lang="en">
<head>
<title>Home - Octopus Deploy</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="Octopus Deploy end user documentation">
<meta name="author" content="Octopus Deploy Pty. Ltd.">
<link href="https://octopus.com/Content/css?v=gINWHNhE0iHcMgkubiWTdi_Y0omBd0nNmJWowMG1gJM1" rel="stylesheet">
<link rel="stylesheet" href="https://octopus.com/Content/Print.css" type="text/css" media="print">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.css" integrity="sha256-Bl4rr1AwUjcb8VvRrdHXqJvRRCyF7oHsgUl74ELjr7k=" crossorigin="anonymous">
<meta name="viewport" content="width=device-width">
<meta property="og:type" content="website">
<meta property="og:title" content="Home - Octopus Deploy">
<meta property="og:description" content="Octopus Deploy end user documentation">
<meta property="og:site_name" content="Octopus Deploy">
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@OctopusDeploy">
<meta name="application-name" content="Octopus Deploy">
<link rel="canonical" href="https://octopus.com/docs">
<link rel="me" type="text/html" href="https://plus.google.com/102650558422902813929?rel=me">
<link rel="me" type="text/html" href="http://feeds.feedburner.com/OctopusDeploy">
<link rel="me" type="text/html" href="https://twitter.com/OctopusDeploy">
<link rel="icon" type="image/png" href="https://octopus.com/content/resources/favicon.png">
<link rel="apple-touch-icon" href="https://octopus.com/content/resources/Octopus-96x96.png">
<link href="http://feeds.feedburner.com/OctopusDeploy" type="application/rss+xml" rel="alternate" title="Octopus Deploy Blog Feed">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous">
<style>.btnCopy{position:absolute;right:0;top:0;}.copyToClipboard{position:relative;}@media (min-width: 1200px) {.container{max-width:1600px;width:100%;}}</style>
</head>
<body class="">
 
<script>
    window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
    ga('create', 'UA-24461753-1', 'auto');
    ga('send', 'pageview');
</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
 
 
<script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
        var b=document.getElementsByTagName("script")[0];
        a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/2568.js?"+Math.floor(new Date().getTime()/3600000);
        a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>
 
<div class="top-and-splash">
<div id="top">
<div id="header">
<div class="navbar navbar-fixed-top">
<div class="">
<div class="container">
<div>
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a id="logo" class="navbar-brand" href="/">Octopus Deploy</a>
</div>
<div id="nav-main" class='navbar-collapse collapse'>
<div>
<ul class="nav navbar-nav navbar-right">
<li class="">
<a href="/why">
Why Octopus
</a>
</li>
<li class="">
<a href="/downloads">
Downloads
</a>
</li>
<li class="">
<a href="/company/about">
Company
</a>
</li>
<li class="active">
<a href="/docs">
Docs
</a>
</li>
<li class="">
<a href="/support">
Support
</a>
</li>
<li class="">
<a href="/purchase">
Pricing
</a>
</li>
<li class=""><a href="/blog">Blog</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="middle">
<div id="main">
<div class="stripe stripe-blue">
<div class="container">
<span class="page-title">Octopus Deploy Documentation</span>
</div>
</div>
<div style="padding-left: 16px;" class="stripe stripe-white">
<div class="container">
<div class="row">
<div class="col-md-9">
<div id="doc_content" class="main-content"><h1>Retention Policies</h1><p>As you deploy more often and to different environments, files and releases can build up. This is what retention policies are for. They allow you to define what is kept in terms of releases, packages and files.</p>
<div class="alert alert-info"><p>We talk about Tentacles in this page, but the same process and logic applies to <a href="/docs/v/3.10/deployment-targets/ssh-targets" class="alert-link">SSH Targets</a> also.</p>
</div>
<h2 id="RetentionPolicies-Whatisdeleted">What is deleted</h2>
<p>There are three different types of retention policies that run. Those on the Octopus Server, those on the Tentacle and those in the in-built NuGet repository.</p>
<p>The Octopus Server settings delete <strong>releases</strong> from the database. This is a data deletion. It also cleans up any <strong>artifacts</strong>, <strong>deployments, tasks, events</strong> and <strong>logs</strong> attached to the release. Releases that are still on the overall dashboard are never deleted. It is assumed to be the working release and may still be promoted (even if their dates fall well outside the retention policy). No packages from the internal NuGet repository will be deleted as part of this policy, but they may be deleted by a corresponding repository retention policy.</p>
<p>The Tentacle settings delete <strong>packages</strong>, and expanded <strong>files and folders</strong> from packages on the Tentacle machine that is being deployed to. Note that if you use the <a href="/docs/v/3.10/deploying-applications/custom-installation-directory">Custom Installation Directory </a>feature, we will never delete from that directory during retention policies. This can be purged during deployment in the project step settings. But it is assumed this will have a working release in it.</p>
<p>The in-built NuGet repository will delete any <strong>packages</strong> that are not attached to any release. If you happen to have higher versions of packages that have not been released, we will keep them assuming a release will be created. If you delete releases using the Octopus Server retention policy then any packages that were associated with those releases will then be deleted with that task.</p>
<div class="alert alert-info"><p><strong>Projects that use variables in Package IDs</strong><br />
You can <a href="/docs/v/3.10/deploying-applications/deploying-packages/dynamically-selecting-packages" class="alert-link">configure Octopus to select packages dynamically using variables</a>, which makes things more complicated for retention policies. <a href="http://help.octopusdeploy.com/discussions/problems/43995" class="alert-link" rel="nofollow">Read this page to learn more</a>.</p>
</div>
<h2 id="RetentionPolicies-Whentheretentionpoliciesareapplied">When the retention policies are applied</h2>
<p>Both the Octopus Server and NuGet repository retention policies are run under a scheduled task from the Octopus Server every 4 hours. This task does not apply retention policies to Tentacles.</p>
<p>Tentacle retention policies are run <strong>during a deployment</strong>, specifically <strong>after all package acquisition steps have completed</strong>. So if you have a retention policy of 3 days and do not deploy to a Tentacle for 5 days, the files that are over 3 days old will not be deleted until after a deployment is run to that Tentacle. It will also only delete any packages or files that are associated with the <strong>current project</strong> being deployed. If it's a development server, and you have multiple projects deploying there, only the active deployed project files will be deleted. It does not have any information about other project's retention policies tagged with the deployment.</p>
<h2 id="RetentionPolicies-HowretentionpoliciesworkwithLifecyclephases">How retention policies work with Lifecycle phases</h2>
<p>You can set individual retention policies to phases. This gives you much more control over environments, such as never deleting from Production but having a strict rigorous deletion from your Development environment.</p>
<p>But how does it work? For a release we determine what phase it is currently in. So if a release is created and no deployments have been done, the default Lifecycle retention policy is the active setting for that release. When it is then deployed to the first phase, that retention policy becomes the active setting for the release, and so on. So when the release hits the production phase, and is set to keep all, that release will be kept, as will any deployments done to any environment of that release.</p>
<p>If you have an Octopus Server retention policy for a project that has a final phase of keep all releases, once the release enters that phase it will never be deleted. But if you have a release that has not yet deployed to any environments in the final phase, and is set to only keep the last 3 releases, then the release will be deleted when it becomes the 4th release of the project that has not yet been deployed to any final phase environment. (Unless it is still on the dashboard!).</p>
<h2 id="RetentionPolicies-IthinkIgotit,howdoIsetmyretentionpolicies?">I think I got it, how do I set my retention policies?</h2>
<p>Under <span class="path">Library ➜ Lifecycles</span> you select the Lifecycle you want to define or edit your retention policy for:</p>
<p><a href='#' data-featherlight='/docs/images/3048140/3278063.png' class='zoom' data-title=''><img src='/docs/images/3048140/3278063.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>Each phase will inherit the retention policy from the above phase, but this is something you can change.</p>
<p><a href='#' data-featherlight='/docs/images/3048140/3278062.png' class='zoom' data-title=''><img src='/docs/images/3048140/3278062.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>Clicking on the change link will bring up a dialog to change your retention policy.</p>
<p><a href='#' data-featherlight='/docs/images/3048140/3278061.png' class='zoom' data-title=''><img src='/docs/images/3048140/3278061.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>Releases determines what is kept on the Octopus Server, and Files on Tentacle determines what files are kept on the Tentacle.</p>
<p>You can keep all, or select a number of releases to keep.</p>
<p>You are also able to specify a number of days worth of releases and files to keep if this is preferred.</p>
<h2 id="RetentionPolicies-NuGetfeedretentionpolicy">NuGet feed retention policy</h2>
<p>You can find the in-built repository retention policy settings under <span class="path">Library ➜ Packages</span>.</p>
<p><a href='#' data-featherlight='/docs/images/3048140/3278060.png' class='zoom' data-title=''><img src='/docs/images/3048140/3278060.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>This can also be set to keep a set number, or keep for a set number of days:</p>
<p><a href='#' data-featherlight='/docs/images/3048140/3278059.png' class='zoom' data-title=''><img src='/docs/images/3048140/3278059.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<div class="alert alert-success"><p><strong>Exernal Feeds</strong><br />
Octopus does not apply any retention policies to external feeds. However the packages that are currently in-use can be retrieved from the API (<a href="https://github.com/OctopusDeploy/OctopusDeploy-Api/blob/master/Octopus.Client/LINQPad/GetInUsePackages.linq" class="alert-link" rel="nofollow">example</a>) and those results then used to remove packages from those feeds.</p>
</div>
<h2 id="in-this-section">In this section</h2>
<p>The rest of this section covers these topics in some more detail, and explains how to implement them.</p>
<ul>
<li><a href="/docs/v/3.10/administration/retention-policies/retention-policy-tentacle-cleanup-and-troubleshooting">Retention policy Tentacle cleanup and troubleshooting</a></li>
</ul>
</div>
</div>
<div class="col-md-3" style="padding-bottom: 100px">
<div class="panel panel-info documentation">
<div class="panel-heading">
<div class="panel-title">
<a href="/docs">Documentation</a>
<div style="margin-top: -3px; margin-bottom: 0" class="dropdown pull-right">
<button class="btn btn-info btn-xs dropdown-toggle" type="button" id="versionSelector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
Latest
<span class="caret"></span>
</button>
<ul class="dropdown-menu" aria-labelledby="versionSelector"><li class=''><a href='/docs/administration/retention-policies'>Latest</a></li><li class=''><a href='/docs/v/3.14/administration/retention-policies'>3.14</a></li><li class=''><a href='/docs/v/3.13/administration/retention-policies'>3.13</a></li><li class=''><a href='/docs/v/3.12/administration/retention-policies'>3.12</a></li><li class=''><a href='/docs/v/3.11/administration/retention-policies'>3.11</a></li><li class='disabled'><a href='/docs/v/3.10/administration/retention-policies'>3.10</a></li><li class=''><a href='/docs/v/3.9/administration/retention-policies'>3.9</a></li><li class=''><a href='/docs/v/3.8/administration/retention-policies'>3.8</a></li><li class=''><a href='/docs/v/3.7/administration/retention-policies'>3.7</a></li><li class=''><a href='/docs/v/3.6/administration/retention-policies'>3.6</a></li></ul>
</div>
</div>
</div>
<div class="panel-body">
<form action="/search" method="get"> <div class="form-search search-only">
<i class="search-icon fa fa-search"></i>
<input id="context" name="context" type="hidden" value="docs">
<input class="form-control search-query" id="q" name="q" placeholder="Search" type="text" value="">
</div>
</form>
<div class="sidebar">
<ul>
<li>
<a class=" " href="/docs/getting-started">Getting started</a>
</li>
<li>
<a class=" has-children" href="/docs/installation">Installation</a>
</li>
<li>
<a class=" has-children" href="/docs/key-concepts">Key Concepts</a>
</li>
<li>
<a class=" has-children" href="/docs/packaging-applications">Packaging applications</a>
</li>
<li>
<a class=" has-children" href="/docs/deployment-targets">Deployment targets</a>
</li>
<li>
<a class=" has-children" href="/docs/deploying-applications">Deploying applications</a>
</li>
<li>
<a class=" has-children" href="/docs/api-and-integration">API and Integration</a>
</li>
<li>
<a class=" has-children" href="/docs/patterns">Patterns</a>
</li>
<li>
<a class=" has-children" href="/docs/administration">Administration</a>
</li>
<li>
<a class=" has-children" href="/docs/reference">Reference</a>
</li>
<li>
<a class=" has-children" href="/docs/how-to">How to</a>
</li>
<li>
<a class=" has-children" href="/docs/guides">Guides</a>
</li>
</ul>
</div>
</div>
</div>
<div class="text-center">
<a href="https://github.com/OctopusDeploy/docs/blob/master/docs/index.md" class="tutorial" rel="nofollow">Edit this page on GitHub</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="bottom">
<div id="footer">
<div class="container">
<div class="row">
<div class="col-md-3">
<strong>Octopus Deploy</strong>
<p>
<a href="/company/about">Company</a>
<br>
<a href="/company/testimonials">Testimonials</a>
<br>
<a href="/company/roadmap">Roadmap</a>
<br>
<a href="/privacy">Privacy policy</a>
<br>
<a href="/company/team">Team</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/docs" style="color: inherit">Documentation</a></strong>
<p>
<a href="/docs/getting-started">
Getting started
</a>
<br>
<a href="/docs/packaging-applications">
Packaging
</a>
<br>
<a href="/docs/deploying-applications">
Deploying applications
</a>
<br>
<a href="/docs/api-and-integration">
REST API and integration
</a>
<br>
<a href="/docs/how-to">
How to
</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/support" style="color: inherit">Help &amp; Support</a></strong>
<p>
<a href="http://help.octopusdeploy.com/discussions/problems" class="external">
Problems
</a>
<br>
<a href="http://help.octopusdeploy.com/discussions/questions" class="external">
Questions
</a>
<br>
<a href="https://octopusdeploy.uservoice.com/" class="external">
Suggestions
</a>
<br>
<a href="/videos">
Videos
</a>
<br>
<a href="/company/partners">
Partners
</a>
</p>
</div>
<div class="col-md-3" style="text-align: left">
<strong>Follow us</strong>
<p>
<a href="https://twitter.com/OctopusDeploy"><i class="fa fa-fw fa-twitter" style='color: rgb(85, 172, 238);'></i> @OctopusDeploy</a><br>
<a href="https://github.com/OctopusDeploy"><i class="fa fa-fw fa-github" style='color: white'></i> OctopusDeploy</a><br>
<a href="http://www.youtube.com/c/Octopusdeploy"><i class="fa fa-fw fa-youtube-play" style='color: #D52423'></i> YouTube</a><br>
<a href="http://feeds.feedburner.com/OctopusDeploy"><i class="fa fa-fw fa-rss" style='color: orange'></i> Octopus Deploy Blog</a><br>
<a href="https://confirmsubscription.com/h/d/740FABA4D5BBCE4B"><i class="fa fa-fw fa-envelope" style='color: #7BD678'></i> Newsletter</a><br>
</p>
</div>
</div>
</div>
</div>
</div>
<script src="https://octopus.com/bundles/jquery?v=G3cMxyHQisnfgHNXEHQ14yIRldK7D4FD5TlU9xTesBI1"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.js" integrity="sha256-zTDNEf7J+bPdCSndhy8DppFjxfRGG5BFJW5obpl0XQs=" crossorigin="anonymous"></script>
<script type="text/javascript">
    (function ($) {
        var ts;

        $("div.navbar-fixed-top").autoHidingNavbar();
            
        $.featherlight.defaults.closeOnClick = 'anywhere';
        $.featherlight.defaults.afterOpen = function () {
            ts = + new Date();
            $(window).on('scroll', closeFeatherlightOnScroll);
        };

        function closeFeatherlightOnScroll(event) {
            var nowTs = + new Date();

            if (ts + 500 > nowTs) {
                return;
            }
            $.featherlight.close(event);
            $(window).off('scroll', closeFeatherlightOnScroll);
        }
    })($);
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/sql.min.js" integrity="sha256-J7HuqMJTEc5SsyA8nOP0+kVUMGlQq0LrQAvAVgs1k1E=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/powershell.min.js" integrity="sha256-cRUESDACI7Yr/eSmoHs6zDQu6HmpAkCp0s4xrZ9RnE0=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js" integrity="sha256-putofyQv7OB569xAldpyBnHJ0Uc+7VGp5Us05IgDGss=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/fsharp.min.js" integrity="sha256-EwjgDftHUX2pcHkcn19JrQPazoBiHIDivBrellTCYnA=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/twemoji.min.js" integrity="sha256-Y3KC8juDUsBOzJ3XtOH/sj+BAlF9AQr6pEey+4ibaJ4=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js" integrity="sha256-Gn7MUQono8LUxTfRA0WZzJgTua52Udm1Ifrk5421zkA=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function($) {
            $('time').each(function(i, e) {
                var time = moment($(e).attr('datetime')).fromNow();
                $(e).html(time);
            });

            hljs.initHighlightingOnLoad();

            anchors.options.placement = 'left';
            anchors.add('#doc_content > h1, #doc_content > h2, #doc_content > h3, #doc_content > h4');

            twemoji.parse(document.body,
            {
                size: '16x16',
                base: 'https://cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/'
            });
            
            function canCopyToClipboard() {
                return window.clipboardData && window.clipboardData.setData ||
                    document.queryCommandSupported && document.queryCommandSupported("copy");
            };

            function copyToClipboard(text) {
                if (window.clipboardData && window.clipboardData.setData) {
                    $(window).trigger("copy", e);
                    return clipboardData.setData("Text", text);

                } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
                    var textarea = document.createElement("textarea");
                    textarea.textContent = text;
                    textarea.style.position = "fixed";
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        return document.execCommand("copy");
                    } catch (ex) {
                        console.warn("Copy to clipboard failed.", ex);
                        return false;
                    } finally {
                        document.body.removeChild(textarea);
                    }
                }

                return false;
            };

            if (canCopyToClipboard()) {
                var copyButton =
                    $("<a title=\"Copy to clipboard\" class=\"btnCopy btn btn-default btn-xs\" href=\"#\" role=\"button\">Copy</a>");
                copyButton.click(function (e) {
                    var el = $(this).parent().next().find("code");
                    if (el) {
                        copyToClipboard(el[0].textContent);
                        $(this).attr("title", "Copied!").tooltip("fixTitle").tooltip("show")
                               .attr("title", "Copy to clipboard").tooltip("fixTitle");
                    }
                    e.stopPropagation();
                    return false;
                });

                var wrapperForButton =
                    $("<div class=\"copyToClipboard\"></div>").append(copyButton);

                $("pre").before(wrapperForButton);
                $("a.btnCopy").tooltip();
            }
        })($);
    </script>
 
 
</body>
</html>
