<!DOCTYPE html>
<html lang="en">
<head>
<title>Home - Octopus Deploy</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="Octopus Deploy end user documentation">
<meta name="author" content="Octopus Deploy">
<link href="https://octopus.com/Content/css?v=-4KqQQob8dsL5hdI1n8ITu5WSvQ-X4_-0QjLsU2Qxgo1" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.css" integrity="sha256-Bl4rr1AwUjcb8VvRrdHXqJvRRCyF7oHsgUl74ELjr7k=" crossorigin="anonymous">
<meta name="viewport" content="width=device-width">
<meta property="og:type" content="website">
<meta property="og:title" content="Home - Octopus Deploy">
<meta property="og:description" content="Octopus Deploy end user documentation">
<meta property="og:site_name" content="Octopus Deploy">
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@OctopusDeploy">
<meta name="application-name" content="Octopus Deploy">
<link rel="canonical" href="https://octopus.com/docs">
<link rel="me" type="text/html" href="https://plus.google.com/102650558422902813929?rel=me">
<link rel="me" type="text/html" href="http://feeds.feedburner.com/OctopusDeploy">
<link rel="me" type="text/html" href="https://twitter.com/OctopusDeploy">
<link rel="icon" type="image/png" href="https://octopus.com/content/resources/favicon.png">
<link rel="apple-touch-icon" href="https://octopus.com/content/resources/Octopus-96x96.png">
<link href="http://feeds.feedburner.com/OctopusDeploy" type="application/rss+xml" rel="alternate" title="Octopus Deploy Blog Feed">
<script type="text/javascript">
        !function (a, b, c, d, e, f, g) {
            a.RaygunObject = e, a[e] = a[e] || function () {
                    (a[e].o = a[e].o || []).push(arguments)
                }, f = b.createElement(c), g = b.getElementsByTagName(c)[0],
                f.async = 1, f.src = d, g.parentNode.insertBefore(f, g)
        }(window, document, "script", "//cdn.raygun.io/raygun4js/raygun.min.js", "rg4js");
    </script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous">
<style>
        .btnCopy {
            position: absolute;
            right: 0;
            top: 0;
        }

        .copyToClipboard {
            position: relative;
        }

        @media (min-width: 1200px) {
            .container {
                max-width: 1600px;
                width: 100%;
            }
        }
    </style>
</head>
<body class="">

<script>
        window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
        ga('create', 'UA-24461753-1', 'auto');
        ga('send', 'pageview');
    </script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>


<script type="text/javascript">
        setTimeout(function () {
            var a = document.createElement("script");
            var b = document.getElementsByTagName("script")[0];
            a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0021/2568.js?" + Math.floor(new Date().getTime() / 3600000);
            a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
        }, 1);
    </script>

<div class="top-and-splash">
<div id="top">
<div id="header">
<div class="navbar navbar-fixed-top">
<div class="">
<div class="container">
<div>
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a id="logo" class="navbar-brand" href="/">Octopus Deploy</a>
</div>
<div id="nav-main" class="navbar-collapse collapse">
<div>
<ul class="nav navbar-nav navbar-right">
<li class="">
<a href="/#features">
Features
</a>
</li>
<li class="">
<a href="/downloads">
Downloads
</a>
</li>
<li class="">
<a href="/company/about">
Company
</a>
</li>
<li class="active">
<a href="/docs">
Docs
</a>
</li>
<li class="">
<a href="/support">
Support
</a>
</li>
<li class="">
<a href="/purchase">
Pricing
</a>
</li>
<li class="">
<a href="/blog">Blog</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="middle">
<div id="main">
<div class="stripe stripe-blue">
<div class="container">
<span class="page-title">Octopus Deploy Documentation</span>
</div>
</div>
<div style="padding-left: 16px;" class="stripe stripe-white">
<div class="container">
<div class="row">
<div class="col-md-9">
<div id="doc_content" class="main-content"><h1>Configure Environment-specific configuration transforms while keeping sensitive values in Octopus</h1><p>Octopus Deploy has great support for transforming configuration files based on the environment or machine you're deploying to.</p>
<p>As an example scenario, let's assume we have a web application that's being deployed to a Development, Staging, and Production environment, and you want to change your <code>Web.Config</code> file to reflect environment-specific values.</p>
<p><a href='#' data-featherlight='/docs/images/3049047/3278464.png' class='zoom' data-title=''><img src='/docs/images/3049047/3278464.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>There are three Octopus features that are commonly used to help provide an environment-specific configuration to your deployed application.</p>
<ol>
<li>Use the <strong><a href="/docs/v/3.10/deploying-applications/configuration-files">Configuration Variables</a> feature</strong> to automatically replace <code>appSettings</code>, <code>applicationSettings</code>, and <code>connectionStrings</code> values in your <code>.config</code> files with ones from your variables list.
The limitation of this technique is you're restricted to these two configuration sections. If you have settings in other parts of your configuration file, this technique won't work.</li>
<li>Use the <strong><a href="/docs/v/3.10/deploying-applications/substitute-variables-in-files">Substitute Variables</a> in Files feature</strong> to replace any values specified by the <code>#{variable}</code> syntax in any text-based file.
The limitation of this technique is the Octopus variable syntax needs to already be in the file. If you're relying on that config file for your development, this can be difficult to manage.</li>
<li>Use the <strong><a href="/docs/v/3.10/deploying-applications/configuration-files">Configuration Transforms</a> feature</strong> to transform your XML configuration files for each environment or machine either based on conventions or explicitly.
The problem with this method is twofold. First, the transform files need to be in the nuget package, which probably means they'll be in source control. If there are sensitive values, that means the developers will have access to them. In addition, you can't easily tell what transformations are taking place from within Octopus.
Second, for a large number of environments or machines, you'll need to manage a large number of transform files.</li>
</ol>
<p>To solve these limitations, you can combine the techniques.</p>
<h2 id="ConfigureEnvironment-specificconfigurationtransformswhilekeepingsensitivevaluesinOctopus-OneTransform+VariableReplacement">One Transform + Variable Replacement</h2>
<p>One common technique is to combine options 2 and 3 above.</p>
<p>You would have a single configuration transformation file in your project. If it's named <code>Web.Release.Config</code>, the transformation will be applied to your <code>Web.Config</code> file automatically, however you can have your own filename and apply it to any config file you like.</p>
<p>This transform file can contain <code>#{variable}</code> values. Because your config will only get transformed on deployment, you can safely work with your <code>Web.Config</code> file during development, and you can keep sensitive variables like production passwords out of source control.</p>
<h3 id="ConfigureEnvironment-specificconfigurationtransformswhilekeepingsensitivevaluesinOctopus-Theprocess">The process</h3>
<p>It's important to note that the variable substitution occurs before your configuration transformation. That means you'll have to target your transform files for variable substitution by adding them to the <strong>Target files</strong> setting.</p>
<p>For example, let's assume our <code>Web.Config</code> file has a <code>MyDatabaseConnection</code> connection string and a special <code>MyCustomSettingsSection</code> element. Something like this:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;configuration&gt;
  &lt;connectionStrings&gt;
    &lt;add name=&quot;MyDatabaseConnection&quot; connectionString=&quot;Server=(local)\SQLExpress;Database=OctoFX;Trusted_connection=SSPI&quot;/&gt;
  &lt;/connectionStrings&gt;
  &lt;MyCustomSettingsSection&gt;
    &lt;TestMode&gt;True&lt;/TestMode&gt;
  &lt;/MyCustomSettingsSection&gt;
&lt;/configuration&gt;
</code></pre>
<p>We also have a <code>Web.Release.Config</code> transform file with the following contents:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;configuration xmlns:xdt=&quot;http://schemas.microsoft.com/XML-Document-Transform&quot;&gt;
  &lt;connectionStrings&gt;
    &lt;add name=&quot;MyDatabaseConnection&quot; connectionString=&quot;#{OctoFXDatabase}&quot; xdt:Transform=&quot;SetAttributes&quot; xdt:Locator=&quot;Match(name)&quot;/&gt;
  &lt;/connectionStrings&gt;
  &lt;MyCustomSettingsSection&gt;
    &lt;TestMode xdt:Transform=&quot;Replace&quot;&gt;#{RunTestMode}&lt;/TestMode&gt;
  &lt;/MyCustomSettingsSection&gt;
&lt;/configuration&gt;
</code></pre>
<p>Finally, we have the following variables configured:</p>
<p><a href='#' data-featherlight='/docs/images/3049047/3278465.png' class='zoom' data-title=''><img src='/docs/images/3049047/3278465.png' class="img-fluid center" height="auto" width="500" alt='' /></a></p>
<p>On deployment to your Staging environment, your process would go like this:</p>
<ol>
<li>Your package, complete with your original <code>Web.Config</code> and your <code>Web.Release.Config</code> transform file, will be extracted to the target.</li>
<li>Variable Substitution will run against your <code>Web.Release.Config</code> file (assuming it's been listed in the Target files setting)
This will change the <code>#{OctoFXDatabase}</code> string to the Staging connection string, and will insert <code>False</code> into the <code>TestMode</code> element.</li>
<li>Then, the Config Transformation feature will run and apply this new transform file to your <code>Web.Config</code>.</li>
</ol>
<p>The end result is a correctly transformed configuration for your staging environment. All without a specific Staging transform file, and while keeping your <code>Web.Config</code> file clean for development.</p>
</div>
</div>
<div class="col-md-3" style="padding-bottom: 100px">
<div class="panel panel-info documentation">
<div class="panel-heading">
<div class="panel-title">
<a href="/docs">Documentation</a>
<div style="margin-top: -3px; margin-bottom: 0" class="dropdown pull-right">
<button class="btn btn-info btn-xs dropdown-toggle" type="button" id="versionSelector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
Latest
<span class="caret"></span>
</button>
<ul class="dropdown-menu" aria-labelledby="versionSelector"><li class=''><a href='/docs/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>Latest</a></li><li class=''><a href='/docs/v/3.15/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.15</a></li><li class=''><a href='/docs/v/3.14/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.14</a></li><li class=''><a href='/docs/v/3.13/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.13</a></li><li class=''><a href='/docs/v/3.12/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.12</a></li><li class=''><a href='/docs/v/3.11/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.11</a></li><li class='disabled'><a href='/docs/v/3.10/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.10</a></li><li class=''><a href='/docs/v/3.9/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.9</a></li><li class=''><a href='/docs/v/3.8/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.8</a></li><li class=''><a href='/docs/v/3.7/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.7</a></li><li class=''><a href='/docs/v/3.6/how-to/configure-environment-specific-configuration-transforms-while-keeping-sensitive-values-in-octopus'>3.6</a></li></ul>
</div>
</div>
</div>
<div class="panel-body">
<form action="/search" method="get"> <div class="form-search search-only">
<i class="search-icon fa fa-search"></i>
<input id="context" name="context" type="hidden" value="docs">
<input class="form-control search-query" id="q" name="q" placeholder="Search" type="text" value/="">
</div>
</form>
<div class="sidebar">
<ul>
<li>
<a class=" " href="/docs/getting-started">Getting started</a>
</li>
<li>
<a class=" has-children" href="/docs/installation">Installation</a>
</li>
<li>
<a class=" has-children" href="/docs/key-concepts">Key Concepts</a>
</li>
<li>
<a class=" has-children" href="/docs/packaging-applications">Packaging applications</a>
</li>
<li>
<a class=" has-children" href="/docs/deployment-targets">Deployment targets</a>
</li>
<li>
<a class=" has-children" href="/docs/deploying-applications">Deploying applications</a>
</li>
<li>
<a class=" has-children" href="/docs/api-and-integration">API and Integration</a>
</li>
<li>
<a class=" has-children" href="/docs/patterns">Patterns</a>
</li>
<li>
<a class=" has-children" href="/docs/administration">Administration</a>
</li>
<li>
<a class=" has-children" href="/docs/reference">Reference</a>
</li>
<li>
<a class=" has-children" href="/docs/how-to">How to</a>
</li>
<li>
<a class=" has-children" href="/docs/guides">Guides</a>
</li>
</ul>
</div>
</div>
</div>
<div class="text-center">
<a href="https://github.com/OctopusDeploy/docs/blob/master/docs/index.md" class="tutorial" rel="nofollow">Edit this page on GitHub</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="bottom">
<div id="footer">
<div class="container">
<div class="row">
<div class="col-md-3">
<strong>Octopus Deploy</strong>
<p>
<a href="/company/about">Company</a>
<br>
<a href="/company/testimonials">Testimonials</a>
<br>
<a href="/company/roadmap">Roadmap</a>
<br>
<a href="/privacy">Privacy policy</a>
<br>
<a href="/company/team">Team</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/docs" style="color: inherit">Documentation</a></strong>
<p>
<a href="/docs/getting-started">
Getting started
</a>
<br>
<a href="/docs/packaging-applications">
Packaging
</a>
<br>
<a href="/docs/deploying-applications">
Deploying applications
</a>
<br>
<a href="/docs/api-and-integration">
REST API and integration
</a>
<br>
<a href="/docs/how-to">
How to
</a>
</p>
</div>
<div class="col-md-3">
<strong><a href="/support" style="color: inherit">Help &amp; Support</a></strong>
<p>
<a href="http://help.octopusdeploy.com/discussions/problems" class="external">
Problems
</a>
<br>
<a href="http://help.octopusdeploy.com/discussions/questions" class="external">
Questions
</a>
<br>
<a href="https://octopusdeploy.uservoice.com/" class="external">
Suggestions
</a>
<br>
<a href="/videos">
Videos
</a>
<br>
<a href="/company/partners">
Partners
</a>
</p>
</div>
<div class="col-md-3" style="text-align: left">
<strong>Follow us</strong>
<p>
<a href="https://twitter.com/OctopusDeploy"><i class="fa fa-fw fa-twitter" style="color: rgb(85, 172, 238);"></i> @OctopusDeploy</a><br>
<a href="https://github.com/OctopusDeploy"><i class="fa fa-fw fa-github" style="color: white"></i> OctopusDeploy</a><br>
<a href="http://www.youtube.com/c/Octopusdeploy"><i class="fa fa-fw fa-youtube-play" style="color: #D52423"></i> YouTube</a><br>
<a href="http://feeds.feedburner.com/OctopusDeploy"><i class="fa fa-fw fa-rss" style="color: orange"></i> Octopus Deploy Blog</a><br>
<a href="https://confirmsubscription.com/h/d/740FABA4D5BBCE4B"><i class="fa fa-fw fa-envelope" style="color: #7BD678"></i> Newsletter</a><br>
</p>
</div>
</div>
</div>
</div>
</div>
<script src="https://octopus.com/bundles/jquery?v=cnl66tdQfXzonUpL0zSMnDJgJiJJfXbV8tKD-S_8H_Q1"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.js" integrity="sha256-zTDNEf7J+bPdCSndhy8DppFjxfRGG5BFJW5obpl0XQs=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function ($) {
            var ts;

            $("div.navbar-fixed-top").autoHidingNavbar();

            $.featherlight.defaults.closeOnClick = 'anywhere';
            $.featherlight.defaults.afterOpen = function () {
                ts = + new Date();
                $(window).on('scroll', closeFeatherlightOnScroll);
            };

            function closeFeatherlightOnScroll(event) {
                var nowTs = + new Date();

                if (ts + 500 > nowTs) {
                    return;
                }
                $.featherlight.close(event);
                $(window).off('scroll', closeFeatherlightOnScroll);
            }
        })($);
    </script>
 <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/sql.min.js" integrity="sha256-J7HuqMJTEc5SsyA8nOP0+kVUMGlQq0LrQAvAVgs1k1E=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/powershell.min.js" integrity="sha256-cRUESDACI7Yr/eSmoHs6zDQu6HmpAkCp0s4xrZ9RnE0=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js" integrity="sha256-putofyQv7OB569xAldpyBnHJ0Uc+7VGp5Us05IgDGss=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/fsharp.min.js" integrity="sha256-EwjgDftHUX2pcHkcn19JrQPazoBiHIDivBrellTCYnA=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/twemoji.min.js" integrity="sha256-Y3KC8juDUsBOzJ3XtOH/sj+BAlF9AQr6pEey+4ibaJ4=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js" integrity="sha256-Gn7MUQono8LUxTfRA0WZzJgTua52Udm1Ifrk5421zkA=" crossorigin="anonymous"></script>
<script type="text/javascript">
        (function($) {
            $('time').each(function(i, e) {
                var time = moment($(e).attr('datetime')).fromNow();
                $(e).html(time);
            });

            hljs.initHighlightingOnLoad();

            anchors.options.placement = 'left';
            anchors.add('#doc_content > h1, #doc_content > h2, #doc_content > h3, #doc_content > h4');

            twemoji.parse(document.body,
            {
                size: '16x16',
                base: 'https://cdnjs.cloudflare.com/ajax/libs/twemoji/2.2.3/'
            });
            
            function canCopyToClipboard() {
                return window.clipboardData && window.clipboardData.setData ||
                    document.queryCommandSupported && document.queryCommandSupported("copy");
            };

            function copyToClipboard(text) {
                if (window.clipboardData && window.clipboardData.setData) {
                    $(window).trigger("copy", e);
                    return clipboardData.setData("Text", text);

                } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
                    var textarea = document.createElement("textarea");
                    textarea.textContent = text;
                    textarea.style.position = "fixed";
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        return document.execCommand("copy");
                    } catch (ex) {
                        console.warn("Copy to clipboard failed.", ex);
                        return false;
                    } finally {
                        document.body.removeChild(textarea);
                    }
                }

                return false;
            };

            if (canCopyToClipboard()) {
                var copyButton =
                    $("<a title=\"Copy to clipboard\" class=\"btnCopy btn btn-default btn-xs\" href=\"#\" role=\"button\">Copy</a>");
                copyButton.click(function (e) {
                    var el = $(this).parent().next().find("code");
                    if (el) {
                        copyToClipboard(el[0].textContent);
                        $(this).attr("title", "Copied!").tooltip("fixTitle").tooltip("show")
                               .attr("title", "Copy to clipboard").tooltip("fixTitle");
                    }
                    e.stopPropagation();
                    return false;
                });

                var wrapperForButton =
                    $("<div class=\"copyToClipboard\"></div>").append(copyButton);

                $("pre").before(wrapperForButton);
                $("a.btnCopy").tooltip();
            }
        })($);
    </script>
<script type="text/javascript">
        rg4js('apiKey', 'x6kh9H0AxbqPLcjQVaOZNQ==');
        rg4js('enablePulse', true);
        rg4js('enableCrashReporting', true);
    </script>


</body>
</html>
